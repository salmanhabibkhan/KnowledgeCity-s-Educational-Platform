"use strict";
// https://www.gateway-api-controller.eks.aws.dev/latest/guides/deploy/#setup
// https://raw.githubusercontent.com/aws/aws-application-networking-k8s/main/files/controller-installation/recommended-inline-policy.json
Object.defineProperty(exports, "__esModule", { value: true });
exports.getVpcLatticeControllerPolicy = getVpcLatticeControllerPolicy;
const iam = require("aws-cdk-lib/aws-iam");
function getVpcLatticeControllerPolicy() {
    const vpcLatticePolicy = new iam.PolicyStatement({
        effect: iam.Effect.ALLOW,
        actions: [
            'vpc-lattice:*',
            'ec2:DescribeVpcs',
            'ec2:DescribeSubnets',
            'ec2:DescribeTags',
            'ec2:DescribeSecurityGroups',
            'logs:CreateLogDelivery',
            'logs:GetLogDelivery',
            'logs:DescribeLogGroups',
            'logs:PutResourcePolicy',
            'logs:DescribeResourcePolicies',
            'logs:UpdateLogDelivery',
            'logs:DeleteLogDelivery',
            'logs:ListLogDeliveries',
            'tag:GetResources',
            'firehose:TagDeliveryStream',
            's3:GetBucketPolicy',
            's3:PutBucketPolicy'
        ],
        resources: ['*']
    });
    const vpcLatticeServiceLinkedRole = new iam.PolicyStatement({
        effect: iam.Effect.ALLOW,
        actions: ['iam:CreateServiceLinkedRole'],
        resources: ['arn:aws:iam::*:role/aws-service-role/vpc-lattice.amazonaws.com/AWSServiceRoleForVpcLattice'],
        conditions: {
            StringLike: {
                'iam:AWSServiceName': 'vpc-lattice.amazonaws.com'
            }
        }
    });
    const logsServiceLinkedRole = new iam.PolicyStatement({
        effect: iam.Effect.ALLOW,
        actions: ['iam:CreateServiceLinkedRole'],
        resources: ['arn:aws:iam::*:role/aws-service-role/delivery.logs.amazonaws.com/AWSServiceRoleForLogDelivery'],
        conditions: {
            StringLike: {
                'iam:AWSServiceName': 'delivery.logs.amazonaws.com'
            }
        }
    });
    return [
        vpcLatticePolicy,
        vpcLatticeServiceLinkedRole,
        logsServiceLinkedRole
    ];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWFtLXBvbGljeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9hZGRvbnMvYXdzLWdhdGV3YXktYXBpLWNvbnRyb2xsZXIvaWFtLXBvbGljeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNkVBQTZFO0FBQzdFLHlJQUF5STs7QUFJekksc0VBb0RDO0FBdERELDJDQUEyQztBQUUzQyxTQUFnQiw2QkFBNkI7SUFDekMsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQyxlQUFlLENBQUM7UUFDN0MsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSztRQUN4QixPQUFPLEVBQUU7WUFDTCxlQUFlO1lBQ2Ysa0JBQWtCO1lBQ2xCLHFCQUFxQjtZQUNyQixrQkFBa0I7WUFDbEIsNEJBQTRCO1lBQzVCLHdCQUF3QjtZQUN4QixxQkFBcUI7WUFDckIsd0JBQXdCO1lBQ3hCLHdCQUF3QjtZQUN4QiwrQkFBK0I7WUFDL0Isd0JBQXdCO1lBQ3hCLHdCQUF3QjtZQUN4Qix3QkFBd0I7WUFDeEIsa0JBQWtCO1lBQ2xCLDRCQUE0QjtZQUM1QixvQkFBb0I7WUFDcEIsb0JBQW9CO1NBQ3ZCO1FBQ0QsU0FBUyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQ25CLENBQUMsQ0FBQztJQUVILE1BQU0sMkJBQTJCLEdBQUcsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDO1FBQ3hELE1BQU0sRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUs7UUFDeEIsT0FBTyxFQUFFLENBQUMsNkJBQTZCLENBQUM7UUFDeEMsU0FBUyxFQUFFLENBQUMsNEZBQTRGLENBQUM7UUFDekcsVUFBVSxFQUFFO1lBQ1IsVUFBVSxFQUFFO2dCQUNSLG9CQUFvQixFQUFFLDJCQUEyQjthQUNwRDtTQUNKO0tBQ0osQ0FBQyxDQUFDO0lBRUgsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLEdBQUcsQ0FBQyxlQUFlLENBQUM7UUFDbEQsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSztRQUN4QixPQUFPLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQztRQUN4QyxTQUFTLEVBQUUsQ0FBQywrRkFBK0YsQ0FBQztRQUM1RyxVQUFVLEVBQUU7WUFDUixVQUFVLEVBQUU7Z0JBQ1Isb0JBQW9CLEVBQUUsNkJBQTZCO2FBQ3REO1NBQ0o7S0FDSixDQUFDLENBQUM7SUFFSCxPQUFPO1FBQ0gsZ0JBQWdCO1FBQ2hCLDJCQUEyQjtRQUMzQixxQkFBcUI7S0FDeEIsQ0FBQztBQUNOLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL3d3dy5nYXRld2F5LWFwaS1jb250cm9sbGVyLmVrcy5hd3MuZGV2L2xhdGVzdC9ndWlkZXMvZGVwbG95LyNzZXR1cFxuLy8gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2F3cy9hd3MtYXBwbGljYXRpb24tbmV0d29ya2luZy1rOHMvbWFpbi9maWxlcy9jb250cm9sbGVyLWluc3RhbGxhdGlvbi9yZWNvbW1lbmRlZC1pbmxpbmUtcG9saWN5Lmpzb25cblxuaW1wb3J0ICogYXMgaWFtIGZyb20gJ2F3cy1jZGstbGliL2F3cy1pYW0nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VnBjTGF0dGljZUNvbnRyb2xsZXJQb2xpY3koKTogaWFtLlBvbGljeVN0YXRlbWVudFtdIHtcbiAgICBjb25zdCB2cGNMYXR0aWNlUG9saWN5ID0gbmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICBlZmZlY3Q6IGlhbS5FZmZlY3QuQUxMT1csXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgICd2cGMtbGF0dGljZToqJyxcbiAgICAgICAgICAgICdlYzI6RGVzY3JpYmVWcGNzJyxcbiAgICAgICAgICAgICdlYzI6RGVzY3JpYmVTdWJuZXRzJyxcbiAgICAgICAgICAgICdlYzI6RGVzY3JpYmVUYWdzJyxcbiAgICAgICAgICAgICdlYzI6RGVzY3JpYmVTZWN1cml0eUdyb3VwcycsXG4gICAgICAgICAgICAnbG9nczpDcmVhdGVMb2dEZWxpdmVyeScsXG4gICAgICAgICAgICAnbG9nczpHZXRMb2dEZWxpdmVyeScsXG4gICAgICAgICAgICAnbG9nczpEZXNjcmliZUxvZ0dyb3VwcycsXG4gICAgICAgICAgICAnbG9nczpQdXRSZXNvdXJjZVBvbGljeScsXG4gICAgICAgICAgICAnbG9nczpEZXNjcmliZVJlc291cmNlUG9saWNpZXMnLFxuICAgICAgICAgICAgJ2xvZ3M6VXBkYXRlTG9nRGVsaXZlcnknLFxuICAgICAgICAgICAgJ2xvZ3M6RGVsZXRlTG9nRGVsaXZlcnknLFxuICAgICAgICAgICAgJ2xvZ3M6TGlzdExvZ0RlbGl2ZXJpZXMnLFxuICAgICAgICAgICAgJ3RhZzpHZXRSZXNvdXJjZXMnLFxuICAgICAgICAgICAgJ2ZpcmVob3NlOlRhZ0RlbGl2ZXJ5U3RyZWFtJyxcbiAgICAgICAgICAgICdzMzpHZXRCdWNrZXRQb2xpY3knLFxuICAgICAgICAgICAgJ3MzOlB1dEJ1Y2tldFBvbGljeSdcbiAgICAgICAgXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbJyonXVxuICAgIH0pO1xuXG4gICAgY29uc3QgdnBjTGF0dGljZVNlcnZpY2VMaW5rZWRSb2xlID0gbmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICBlZmZlY3Q6IGlhbS5FZmZlY3QuQUxMT1csXG4gICAgICAgIGFjdGlvbnM6IFsnaWFtOkNyZWF0ZVNlcnZpY2VMaW5rZWRSb2xlJ10sXG4gICAgICAgIHJlc291cmNlczogWydhcm46YXdzOmlhbTo6Kjpyb2xlL2F3cy1zZXJ2aWNlLXJvbGUvdnBjLWxhdHRpY2UuYW1hem9uYXdzLmNvbS9BV1NTZXJ2aWNlUm9sZUZvclZwY0xhdHRpY2UnXSxcbiAgICAgICAgY29uZGl0aW9uczoge1xuICAgICAgICAgICAgU3RyaW5nTGlrZToge1xuICAgICAgICAgICAgICAgICdpYW06QVdTU2VydmljZU5hbWUnOiAndnBjLWxhdHRpY2UuYW1hem9uYXdzLmNvbSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbG9nc1NlcnZpY2VMaW5rZWRSb2xlID0gbmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICBlZmZlY3Q6IGlhbS5FZmZlY3QuQUxMT1csXG4gICAgICAgIGFjdGlvbnM6IFsnaWFtOkNyZWF0ZVNlcnZpY2VMaW5rZWRSb2xlJ10sXG4gICAgICAgIHJlc291cmNlczogWydhcm46YXdzOmlhbTo6Kjpyb2xlL2F3cy1zZXJ2aWNlLXJvbGUvZGVsaXZlcnkubG9ncy5hbWF6b25hd3MuY29tL0FXU1NlcnZpY2VSb2xlRm9yTG9nRGVsaXZlcnknXSxcbiAgICAgICAgY29uZGl0aW9uczoge1xuICAgICAgICAgICAgU3RyaW5nTGlrZToge1xuICAgICAgICAgICAgICAgICdpYW06QVdTU2VydmljZU5hbWUnOiAnZGVsaXZlcnkubG9ncy5hbWF6b25hd3MuY29tJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgICB2cGNMYXR0aWNlUG9saWN5LFxuICAgICAgICB2cGNMYXR0aWNlU2VydmljZUxpbmtlZFJvbGUsXG4gICAgICAgIGxvZ3NTZXJ2aWNlTGlua2VkUm9sZVxuICAgIF07XG59Il19