"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.EksPodIdentityAgentAddOn = void 0;
const core_addon_1 = require("../core-addon");
const aws_eks_1 = require("aws-cdk-lib/aws-eks");
const utils = require("../../utils");
const versionMap = new Map([
    [aws_eks_1.KubernetesVersion.V1_31, "v1.3.4-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_30, "v1.3.2-eksbuild.2"],
    [aws_eks_1.KubernetesVersion.V1_29, "v1.3.2-eksbuild.2"],
    [aws_eks_1.KubernetesVersion.V1_28, "v1.3.2-eksbuild.2"],
    [aws_eks_1.KubernetesVersion.V1_27, "v1.3.2-eksbuild.2"],
    [aws_eks_1.KubernetesVersion.V1_26, "v1.3.2-eksbuild.2"],
]);
/**
 * Default values for the add-on
 */
const defaultProps = {
    addOnName: 'eks-pod-identity-agent',
    version: 'auto',
    versionMap: versionMap,
    saName: "eks-pod-identity-agent-sa",
};
/**
 * Implementation of Amazon EKS Pod Identity Agent add-on.
 */
class EksPodIdentityAgentAddOn extends core_addon_1.CoreAddOn {
    deploy(clusterInfo) {
        return super.deploy(clusterInfo);
    }
    constructor(version) {
        super({
            addOnName: defaultProps.addOnName,
            version: version !== null && version !== void 0 ? version : defaultProps.version,
            saName: defaultProps.saName,
            versionMap: defaultProps.versionMap
        });
    }
}
exports.EksPodIdentityAgentAddOn = EksPodIdentityAgentAddOn;
__decorate([
    utils.conflictsWithAutoMode('v1.3.4-eksbuild.1')
], EksPodIdentityAgentAddOn.prototype, "deploy", null);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvYWRkb25zL2Vrcy1wb2QtaWRlbnRpdHktYWdlbnQvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRUEsOENBQTBDO0FBQzFDLGlEQUF3RDtBQUN4RCxxQ0FBcUM7QUFFckMsTUFBTSxVQUFVLEdBQW1DLElBQUksR0FBRyxDQUFDO0lBQ3ZELENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0lBQzlDLENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0lBQzlDLENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0lBQzlDLENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0lBQzlDLENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0lBQzlDLENBQUMsMkJBQWlCLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDO0NBQ2pELENBQUMsQ0FBQztBQUVIOztHQUVHO0FBQ0gsTUFBTSxZQUFZLEdBQUc7SUFDakIsU0FBUyxFQUFFLHdCQUF3QjtJQUNuQyxPQUFPLEVBQUUsTUFBTTtJQUNmLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLE1BQU0sRUFBRSwyQkFBMkI7Q0FDdEMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsTUFBYSx3QkFBeUIsU0FBUSxzQkFBUztJQUduRCxNQUFNLENBQUMsV0FBd0I7UUFDM0IsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxZQUFZLE9BQWdCO1FBQ3hCLEtBQUssQ0FBQztZQUNGLFNBQVMsRUFBRSxZQUFZLENBQUMsU0FBUztZQUNqQyxPQUFPLEVBQUUsT0FBTyxhQUFQLE9BQU8sY0FBUCxPQUFPLEdBQUksWUFBWSxDQUFDLE9BQU87WUFDeEMsTUFBTSxFQUFFLFlBQVksQ0FBQyxNQUFNO1lBQzNCLFVBQVUsRUFBRSxZQUFZLENBQUMsVUFBVTtTQUN0QyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7QUFmRCw0REFlQztBQVpHO0lBREMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLG1CQUFtQixDQUFDO3NEQUdoRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gXCJjb25zdHJ1Y3RzXCI7XG5pbXBvcnQgeyBDbHVzdGVySW5mbyB9IGZyb20gXCIuLi8uLi9zcGlcIjtcbmltcG9ydCB7IENvcmVBZGRPbiB9IGZyb20gXCIuLi9jb3JlLWFkZG9uXCI7XG5pbXBvcnQgeyBLdWJlcm5ldGVzVmVyc2lvbiB9IGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtZWtzXCI7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcblxuY29uc3QgdmVyc2lvbk1hcDogTWFwPEt1YmVybmV0ZXNWZXJzaW9uLCBzdHJpbmc+ID0gbmV3IE1hcChbXG4gICAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzMxLCBcInYxLjMuNC1la3NidWlsZC4xXCJdLFxuICAgIFtLdWJlcm5ldGVzVmVyc2lvbi5WMV8zMCwgXCJ2MS4zLjItZWtzYnVpbGQuMlwiXSxcbiAgICBbS3ViZXJuZXRlc1ZlcnNpb24uVjFfMjksIFwidjEuMy4yLWVrc2J1aWxkLjJcIl0sXG4gICAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzI4LCBcInYxLjMuMi1la3NidWlsZC4yXCJdLFxuICAgIFtLdWJlcm5ldGVzVmVyc2lvbi5WMV8yNywgXCJ2MS4zLjItZWtzYnVpbGQuMlwiXSxcbiAgICBbS3ViZXJuZXRlc1ZlcnNpb24uVjFfMjYsIFwidjEuMy4yLWVrc2J1aWxkLjJcIl0sXG5dKTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgdGhlIGFkZC1vblxuICovXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gICAgYWRkT25OYW1lOiAnZWtzLXBvZC1pZGVudGl0eS1hZ2VudCcsXG4gICAgdmVyc2lvbjogJ2F1dG8nLFxuICAgIHZlcnNpb25NYXA6IHZlcnNpb25NYXAsXG4gICAgc2FOYW1lOiBcImVrcy1wb2QtaWRlbnRpdHktYWdlbnQtc2FcIixcbn07XG5cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgQW1hem9uIEVLUyBQb2QgSWRlbnRpdHkgQWdlbnQgYWRkLW9uLlxuICovXG5leHBvcnQgY2xhc3MgRWtzUG9kSWRlbnRpdHlBZ2VudEFkZE9uIGV4dGVuZHMgQ29yZUFkZE9uIHtcblxuICAgIEB1dGlscy5jb25mbGljdHNXaXRoQXV0b01vZGUoJ3YxLjMuNC1la3NidWlsZC4xJylcbiAgICBkZXBsb3koY2x1c3RlckluZm86IENsdXN0ZXJJbmZvKTogUHJvbWlzZTxDb25zdHJ1Y3Q+IHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlcGxveShjbHVzdGVySW5mbyk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IodmVyc2lvbj86IHN0cmluZykge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBhZGRPbk5hbWU6IGRlZmF1bHRQcm9wcy5hZGRPbk5hbWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uID8/IGRlZmF1bHRQcm9wcy52ZXJzaW9uLFxuICAgICAgICAgICAgc2FOYW1lOiBkZWZhdWx0UHJvcHMuc2FOYW1lLFxuICAgICAgICAgICAgdmVyc2lvbk1hcDogZGVmYXVsdFByb3BzLnZlcnNpb25NYXBcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl19