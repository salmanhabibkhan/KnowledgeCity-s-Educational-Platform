"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.VpcCniAddOn = void 0;
const utils_1 = require("../../utils");
const core_addon_1 = require("../core-addon");
const kubectl_provider_1 = require("../helm-addon/kubectl-provider");
const aws_eks_1 = require("aws-cdk-lib/aws-eks");
const versionMap = new Map([
    [aws_eks_1.KubernetesVersion.V1_32, "v1.19.2-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_31, "v1.19.0-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_30, "v1.19.0-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_29, "v1.19.0-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_28, "v1.19.0-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_27, "v1.19.0-eksbuild.1"],
    [aws_eks_1.KubernetesVersion.V1_26, "v1.19.0-eksbuild.1"],
]);
const defaultProps = {
    addOnName: 'vpc-cni',
    version: 'auto',
    versionMap: versionMap,
    saName: 'aws-node',
    namespace: 'kube-system',
    controlPlaneAddOn: false,
    configurationValues: {}
};
/**
 * Implementation of VpcCni EKS add-on with Advanced Configurations.
 */
let VpcCniAddOn = class VpcCniAddOn extends core_addon_1.CoreAddOn {
    constructor(props) {
        super({ ...defaultProps, ...props });
        this.vpcCniAddOnProps = { ...defaultProps, ...props };
        this.coreAddOnProps.configurationValues = populateVpcCniConfigurationValues(props);
    }
    deploy(clusterInfo) {
        var _a, _b;
        const cluster = clusterInfo.cluster;
        let securityGroupId = cluster.clusterSecurityGroupId;
        if ((_a = this.vpcCniAddOnProps.customNetworkingConfig) === null || _a === void 0 ? void 0 : _a.securityGroup) {
            securityGroupId = this.vpcCniAddOnProps.customNetworkingConfig.securityGroup.securityGroupId;
        }
        if (((_b = this.vpcCniAddOnProps.customNetworkingConfig) === null || _b === void 0 ? void 0 : _b.subnets)) {
            for (let subnet of this.vpcCniAddOnProps.customNetworkingConfig.subnets) {
                const doc = (0, utils_1.readYamlDocument)(__dirname + '/eniConfig.ytpl');
                const manifest = doc.split("---").map(e => (0, utils_1.loadYaml)(e));
                const values = {
                    availabilityZone: subnet.availabilityZone,
                    securityGroupId: securityGroupId,
                    subnetId: subnet.subnetId
                };
                const manifestDeployment = {
                    name: "EniCustomConfig" + subnet,
                    namespace: this.coreAddOnProps.namespace,
                    manifest,
                    values,
                };
                const kubectlProvider = new kubectl_provider_1.KubectlProvider(clusterInfo);
                kubectlProvider.addManifest(manifestDeployment);
            }
        }
        const addOnPromise = super.deploy(clusterInfo);
        return addOnPromise;
    }
    /**
     * Overrides the core method to provide managed policies.
     * @param _clusterInfo
     * @returns
     */
    provideManagedPolicies(_clusterInfo) {
        return this.vpcCniAddOnProps.serviceAccountPolicies;
    }
    /**
     * Overrides the core addon method in order to replace the SA if exists (which is the case for aws-node).
     * @param clusterInfo
     * @param saNamespace
     * @param policies
     * @returns
     */
    createServiceAccount(clusterInfo, saNamespace, policies) {
        const sa = new utils_1.ReplaceServiceAccount(clusterInfo.cluster, `${this.coreAddOnProps.saName}-sa`, {
            cluster: clusterInfo.cluster,
            name: this.coreAddOnProps.saName,
            namespace: saNamespace
        });
        policies.forEach(p => sa.role.addManagedPolicy(p));
        return sa;
    }
};
exports.VpcCniAddOn = VpcCniAddOn;
__decorate([
    (0, utils_1.conflictsWithAutoMode)("v1.19.0-eksbuild.1")
], VpcCniAddOn.prototype, "deploy", null);
exports.VpcCniAddOn = VpcCniAddOn = __decorate([
    utils_1.supportsALL
], VpcCniAddOn);
/**
 * Iterates over all Values including nested child objects and removes undefined entries
 */
function RemoveUndefined(helmValues) {
    Object.keys(helmValues).forEach(key => {
        if (helmValues[key] === undefined) {
            delete helmValues[key];
        }
        else if (typeof helmValues[key] === 'object') {
            RemoveUndefined(helmValues[key]);
        }
    });
}
function populateVpcCniConfigurationValues(props) {
    if (props === null) {
        return {};
    }
    const result = {
        init: {
            env: {
                DISABLE_TCP_EARLY_DEMUX: JSON.stringify(props === null || props === void 0 ? void 0 : props.disableTcpEarlyDemux), // format: boolean, type: string
                ENABLE_V6_EGRESS: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableV6Egress), // format: boolean, type: string
            }
        },
        env: {
            AWS_EC2_ENDPOINT: props === null || props === void 0 ? void 0 : props.awsEc2Endpoint, // type: string
            ADDITIONAL_ENI_TAGS: props === null || props === void 0 ? void 0 : props.additionalEniTags, // type: string
            ANNOTATE_POD_IP: JSON.stringify(props === null || props === void 0 ? void 0 : props.annotatePodIp), // format: boolean, type: string
            AWS_EXTERNAL_SERVICE_CIDR: props === null || props === void 0 ? void 0 : props.awsExternalServiceCidrs, // type: string
            AWS_MANAGE_ENIS_NON_SCHEDULABLE: JSON.stringify(props === null || props === void 0 ? void 0 : props.awsManageEnisNonSchedulable), // format: boolean, type: string
            AWS_VPC_CNI_NODE_PORT_SUPPORT: JSON.stringify(props === null || props === void 0 ? void 0 : props.awsVpcCniNodePortSupport), // format: boolean, type: string
            AWS_VPC_ENI_MTU: JSON.stringify(props === null || props === void 0 ? void 0 : props.awsVpcEniMtu), // format: integer, type: string
            AWS_VPC_K8S_CNI_CUSTOM_NETWORK_CFG: JSON.stringify(props === null || props === void 0 ? void 0 : props.awsVpcK8sCniCustomNetworkCfg), // format: boolean, type: string
            AWS_VPC_K8S_CNI_EXCLUDE_SNAT_CIDRS: props === null || props === void 0 ? void 0 : props.awsVpcK8sExcludeSnatCidrs, // type: string
            ENI_CONFIG_LABEL_DEF: props === null || props === void 0 ? void 0 : props.eniConfigLabelDef, // type: string
            ENI_CONFIG_ANNOTATION_DEF: props === null || props === void 0 ? void 0 : props.eniConfigAnnotationDef, // type: string
            AWS_VPC_K8S_CNI_EXTERNALSNAT: JSON.stringify(props === null || props === void 0 ? void 0 : props.awsVpcK8sCniExternalSnat), // format: boolean, type: string
            AWS_VPC_K8S_CNI_LOGLEVEL: props === null || props === void 0 ? void 0 : props.awsVpcK8sCniLogLevel, // type: string
            AWS_VPC_K8S_CNI_LOG_FILE: props === null || props === void 0 ? void 0 : props.awsVpcK8sCniLogFile, // type: string
            AWS_VPC_K8S_CNI_RANDOMIZESNAT: props === null || props === void 0 ? void 0 : props.awsVpcK8sCniRandomizeSnat, // type: string
            AWS_VPC_K8S_CNI_VETHPREFIX: props === null || props === void 0 ? void 0 : props.awsVpcK8sCniVethPrefix, // type: string
            AWS_VPC_K8S_PLUGIN_LOG_FILE: props === null || props === void 0 ? void 0 : props.awsVpcK8sPluginLogFile, // type: string
            AWS_VPC_K8S_PLUGIN_LOG_LEVEL: props === null || props === void 0 ? void 0 : props.awsVpcK8sPluginLogLevel, // type: string
            CLUSTER_ENDPOINT: props === null || props === void 0 ? void 0 : props.clusterEndpoint, // type: string
            DISABLE_LEAKED_ENI_CLEANUP: JSON.stringify(props === null || props === void 0 ? void 0 : props.disableLeakedEniCleanup), // format: boolean, type: string
            DISABLE_INTROSPECTION: JSON.stringify(props === null || props === void 0 ? void 0 : props.disableIntrospection), // format: boolean, type: string
            DISABLE_METRICS: JSON.stringify(props === null || props === void 0 ? void 0 : props.disableMetrics), // format: boolean, type: string
            DISABLE_NETWORK_RESOURCE_PROVISIONING: JSON.stringify(props === null || props === void 0 ? void 0 : props.disablenetworkResourceProvisioning), // format: boolean, type: string
            ENABLE_BANDWIDTH_PLUGIN: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableBandwidthPlugin), // format: boolean, type: string
            ENABLE_NFTABLES: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableNftables), // format: boolean, type: string
            ENABLE_POD_ENI: JSON.stringify(props === null || props === void 0 ? void 0 : props.enablePodEni), // format: boolean, type: string
            ENABLE_PREFIX_DELEGATION: JSON.stringify(props === null || props === void 0 ? void 0 : props.enablePrefixDelegation), // format: boolean, type: string
            INTROSPECTION_BIND_ADDRESS: props === null || props === void 0 ? void 0 : props.introspectionBindAddress, // type: string
            MAX_ENI: JSON.stringify(props === null || props === void 0 ? void 0 : props.maxEni), // format: integer, type: string
            MINIMUM_IP_TARGET: JSON.stringify(props === null || props === void 0 ? void 0 : props.minimumIpTarget), // format: integer, type: string
            POD_SECURITY_GROUP_ENFORCING_MODE: props === null || props === void 0 ? void 0 : props.podSecurityGroupEnforcingMode, // type: string
            WARM_ENI_TARGET: JSON.stringify(props === null || props === void 0 ? void 0 : props.warmEniTarget), // format: integer, type: string
            WARM_IP_TARGET: JSON.stringify(props === null || props === void 0 ? void 0 : props.warmIpTarget), // format: integer, type: string
            WARM_PREFIX_TARGET: JSON.stringify(props === null || props === void 0 ? void 0 : props.warmPrefixTarget), // format: integer, type: string
        },
        enableNetworkPolicy: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableNetworkPolicy), // format: boolean, type: string
        enableWindowsIpam: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableWindowsIpam), // format: boolean, type: string
        enableWindowsPrefixDelegation: JSON.stringify(props === null || props === void 0 ? void 0 : props.enableWindowsPrefixDelegation), // format: boolean, type: string
        warmWindowsPrefixTarget: props === null || props === void 0 ? void 0 : props.warmWindowsPrefixTarget, // type: integer
        warmWindowsIPTarget: props === null || props === void 0 ? void 0 : props.warmWindowsIPTarget, // type: integer
        minimumWindowsIPTarget: props === null || props === void 0 ? void 0 : props.minimumWindowsIPTarget, // type: integer
        branchENICooldown: props === null || props === void 0 ? void 0 : props.branchENICooldown, // type: integer
    };
    RemoveUndefined(result);
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvYWRkb25zL3ZwYy1jbmkvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBS0EsdUNBQW1IO0FBQ25ILDhDQUEwRDtBQUMxRCxxRUFBcUY7QUFDckYsaURBQXdEO0FBRXhELE1BQU0sVUFBVSxHQUFtQyxJQUFJLEdBQUcsQ0FBQztJQUN6RCxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztJQUMvQyxDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztDQUNoRCxDQUFDLENBQUM7QUE4VUgsTUFBTSxZQUFZLEdBQW1CO0lBQ25DLFNBQVMsRUFBRSxTQUFTO0lBQ3BCLE9BQU8sRUFBRSxNQUFNO0lBQ2YsVUFBVSxFQUFFLFVBQVU7SUFDdEIsTUFBTSxFQUFFLFVBQVU7SUFDbEIsU0FBUyxFQUFFLGFBQWE7SUFDeEIsaUJBQWlCLEVBQUUsS0FBSztJQUN4QixtQkFBbUIsRUFBRSxFQUFFO0NBQ3hCLENBQUM7QUFFRjs7R0FFRztBQUVJLElBQU0sV0FBVyxHQUFqQixNQUFNLFdBQVksU0FBUSxzQkFBUztJQUt4QyxZQUFZLEtBQXdCO1FBQ2xDLEtBQUssQ0FBQyxFQUFFLEdBQUcsWUFBWSxFQUFFLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxHQUFH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QVMsQ0FBQyxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsNkJBQTZCLENBQUMsRUFBRSxnQ0FBZ0M7UUFDckgsdUJBQXVCLEVBQUUsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLHVCQUF1QixFQUFFLGdCQUFnQjtRQUN6RSxtQkFBbUIsRUFBRSxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCO1FBQ2pFLHNCQUFzQixFQUFFLEtBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxzQkFBc0IsRUFBRSxnQkFBZ0I7UUFDdkUsaUJBQWlCLEVBQUUsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLGlCQUFpQixFQUFFLGdCQUFnQjtLQUM5RCxDQUFDO0lBRUYsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXhCLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJU2VjdXJpdHlHcm91cCwgSVN1Ym5ldCB9IGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtZWMyXCI7XG5pbXBvcnQgKiBhcyBla3MgZnJvbSBcImF3cy1jZGstbGliL2F3cy1la3NcIjtcbmltcG9ydCAqIGFzIGlhbSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWlhbVwiO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cyc7XG5pbXBvcnQgeyBDbHVzdGVySW5mbywgVmFsdWVzIH0gZnJvbSBcIi4uLy4uL3NwaVwiO1xuaW1wb3J0IHsgbG9hZFlhbWwsIHJlYWRZYW1sRG9jdW1lbnQsIFJlcGxhY2VTZXJ2aWNlQWNjb3VudCwgc3VwcG9ydHNBTEwsIGNvbmZsaWN0c1dpdGhBdXRvTW9kZX0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgeyBDb3JlQWRkT24sIENvcmVBZGRPblByb3BzIH0gZnJvbSBcIi4uL2NvcmUtYWRkb25cIjtcbmltcG9ydCB7IEt1YmVjdGxQcm92aWRlciwgTWFuaWZlc3REZXBsb3ltZW50IH0gZnJvbSBcIi4uL2hlbG0tYWRkb24va3ViZWN0bC1wcm92aWRlclwiO1xuaW1wb3J0IHsgS3ViZXJuZXRlc1ZlcnNpb24gfSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWVrc1wiO1xuXG5jb25zdCB2ZXJzaW9uTWFwOiBNYXA8S3ViZXJuZXRlc1ZlcnNpb24sIHN0cmluZz4gPSBuZXcgTWFwKFtcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzMyLCBcInYxLjE5LjItZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzMxLCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzMwLCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzI5LCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzI4LCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzI3LCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbiAgW0t1YmVybmV0ZXNWZXJzaW9uLlYxXzI2LCBcInYxLjE5LjAtZWtzYnVpbGQuMVwiXSxcbl0pO1xuXG4vKipcbiAqIFVzZXIgcHJvdmlkZWQgb3B0aW9uIGZvciB0aGUgSGVsbSBDaGFydFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZwY0NuaUFkZE9uUHJvcHMge1xuXG4gIC8qKlxuICAgKiBgQURESVRJT05BTF9FTklfVEFHU2AgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy5cbiAgICogTWV0YWRhdGEgYXBwbGllZCB0byBFTkkgaGVscHMgeW91IGNhdGVnb3JpemUgYW5kIG9yZ2FuaXplIHlvdXIgXG4gICAqIHJlc291cmNlcyBmb3IgYmlsbGluZyBvciBvdGhlciBwdXJwb3Nlcy4gXG4gICAqL1xuICBhZGRpdGlvbmFsRW5pVGFncz86IHN0cmluZztcblxuICAvKipcbiAgICogYEFOTk9UQVRFX1BPRF9JUGAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IEJvb2xlYW4uXG4gICAqIFNldHRpbmcgQU5OT1RBVEVfUE9EX0lQIHRvIHRydWUgd2lsbCBhbGxvdyBJUEFNRCB0byBhZGQgYW4gYW5ub3RhdGlvbiBcbiAgICogdnBjLmFtYXpvbmF3cy5jb20vcG9kLWlwcyB0byB0aGUgcG9kIHdpdGggcG9kIElQLlxuICAgKi9cbiAgYW5ub3RhdGVQb2RJcD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIGBBV1NfRUMyX0VORFBPSU5UYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogc3RyaW5nLlxuICAgKiBTcGVjaWZpZXMgdGhlIEVDMiBlbmRwb2ludCB0byB1c2UuIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSBcbiAgICogYXJlIHVzaW5nIGEgY3VzdG9tIGVuZHBvaW50IGZvciBFQzIuICBcbiAgICovXG4gIGF3c0VjMkVuZHBvaW50Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBgQVdTX0VYVEVSTkFMX1NFUlZJQ0VfQ0lEUlNgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBzdHJpbmcuXG4gICAqIFNwZWNpZnkgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBJUHY0IENJRFJzIHRoYXQgbXVzdCBiZSByb3V0ZWQgXG4gICAqIHZpYSBtYWluIHJvdXRpbmcgdGFibGUuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIHNlY29uZGFyeSBFTklzIHRvIHJlYWNoIFxuICAgKiBlbmRwb2ludHMgb3V0c2lkZSBvZiBWUEMgdGhhdCBhcmUgYmFja2VkIGJ5IGEgc2VydmljZS4gXG4gICAqL1xuICBhd3NFeHRlcm5hbFNlcnZpY2VDaWRycz86IHN0cmluZztcblxuICAvKipcbiAgICogYEFXU19NQU5BR0VfRU5JU19OT05fU0NIRURVTEFCTEVgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBCb29sZWFuLlxuICAgKiBTcGVjaWZpZXMgd2hldGhlciBJUEFNRCBzaG91bGQgYWxsb2NhdGUgb3IgZGVhbGxvY2F0ZSBFTklzIG9uIGEgbm9uLXNjaGVkdWxhYmxlIFxuICAgKiBub2RlLlxuICAgKi9cbiAgYXdzTWFuYWdlRW5pc05vblNjaGVkdWxhYmxlPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogYEFXU19WUENfQ05JX05PREVfUE9SVF9TVVBQT1JUYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgICogU3BlY2lmaWVzIHdoZXRoZXIgTm9kZVBvcnQgc2VydmljZXMgYXJlIGVuYWJsZWQgb24gYSB3b3JrZXIgbm9kZSdzIHByaW1hcnkgXG4gICAqIG5ldHdvcmsgaW50ZXJmYWNlLiBcbiAgICovXG4gIGF3c1ZwY0NuaU5vZGVQb3J0U3VwcG9ydD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIGBBV1NfVlBDX0VOSV9NVFVgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBJbnRlZ2VyLlxuICAgKiBVc2VkIHRvIGNvbmZpZ3VyZSB0aGUgTVRVIHNpemUgZm9yIGF0dGFjaGVkIEVOSXMuIFRoZSB2YWxpZCByYW5nZSBpcyBcbiAgICogZnJvbSA1NzYgdG8gOTAwMS5cbiAgICovXG4gIGF3c1ZwY0VuaU10dT86IG51bWJlcjtcblxuICAvKipcbiAgKiBgQVdTX1ZQQ19LOFNfQ05JX0NVU1RPTV9ORVRXT1JLX0NGR2AgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IEJvb2xlYW4uXG4gICogU3BlY2lmaWVzIHRoYXQgeW91ciBwb2RzIG1heSB1c2Ugc3VibmV0cyBhbmQgc2VjdXJpdHkgZ3JvdXBzIHRoYXQgYXJlIFxuICAqIGluZGVwZW5kZW50IG9mIHlvdXIgd29ya2VyIG5vZGUncyBWUEMgY29uZmlndXJhdGlvbi5cbiAgKi9cbiAgYXdzVnBjSzhzQ25pQ3VzdG9tTmV0d29ya0NmZz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICogYEFXU19WUENfSzhTX0NOSV9WRVRIUFJFRklYYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogU3RyaW5nLlxuICAqIFNwZWNpZmllcyB0aGUgdmV0aCBwcmVmaXggdXNlZCB0byBnZW5lcmF0ZSB0aGUgaG9zdC1zaWRlIHZldGggZGV2aWNlIG5hbWUgXG4gICogZm9yIHRoZSBDTkkuXG4gICovXG4gIGF3c1ZwY0s4c0NuaVZldGhQcmVmaXg/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICogYEFXU19WUENfSzhTX0NOSV9FWENMVURFX1NOQVRfQ0lEUlNgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBTdHJpbmcuXG4gIFNwZWNpZnkgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBJUHY0IENJRFJzIHRvIGV4Y2x1ZGUgZnJvbSBTTkFULlxuICAqL1xuICBhd3NWcGNLOHNFeGNsdWRlU25hdENpZHJzPzogc3RyaW5nO1xuXG4gIC8qKlxuICAqIGBBV1NfVlBDX0s4U19DTklfTE9HTEVWRUxgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBTdHJpbmcuXG4gICogU3BlY2lmaWVzIHRoZSBsb2dsZXZlbCBmb3IgaXBhbWQgYW5kIGNuaS1tZXRyaWMtaGVscGVyLlxuICAqL1xuICBhd3NWcGNLOHNDbmlMb2dMZXZlbD86IHN0cmluZztcblxuICAvKipcbiAgICogYEFXU19WUENfSzhTX0NOSV9MT0dfRklMRWAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy5cbiAgICogU3BlY2lmaWVzIHdoZXJlIHRvIHdyaXRlIHRoZSBsb2dnaW5nIG91dHB1dCBvZiBpcGFtZC4gRWl0aGVyIHRvIHN0ZG91dCBcbiAgICogb3IgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgZmlsZSAoaS5lLiwgL3Zhci9sb2cvYXdzLXJvdXRlZC1lbmkvaXBhbWQubG9nKS5cbiAgICovXG4gIGF3c1ZwY0s4c0NuaUxvZ0ZpbGU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIGBBV1NfVlBDX0s4U19DTklfUkFORE9NSVpFU05BVGAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy5cbiAgICogU3BlY2lmaWVzIHdoZXRoZXIgdGhlIFNOQVQgaXB0YWJsZXMgcnVsZSBzaG91bGQgcmFuZG9taXplIHRoZSBvdXRnb2luZyBcbiAgICogcG9ydHMgZm9yIGNvbm5lY3Rpb25zLlxuICAgKi9cbiAgYXdzVnBjSzhzQ25pUmFuZG9taXplU25hdD86IHN0cmluZztcblxuICAvKipcbiAgICogYEFXU19WUENfSzhTX0NOSV9FWFRFUk5BTFNOQVRgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBCb29sZWFuLlxuICAgKiBTcGVjaWZpZXMgd2hldGhlciBhbiBleHRlcm5hbCBOQVQgZ2F0ZXdheSBzaG91bGQgYmUgdXNlZCB0byBwcm92aWRlIFNOQVQgXG4gICAqIG9mIHNlY29uZGFyeSBFTkkgSVAgYWRkcmVzc2VzLlxuICAgKi9cbiAgYXdzVnBjSzhzQ25pRXh0ZXJuYWxTbmF0PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogYEFXU19WUENfSzhTX1BMVUdJTl9MT0dfRklMRWAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy5cbiAgICogU3BlY2lmaWVzIHdoZXJlIHRvIHdyaXRlIHRoZSBsb2dnaW5nIG91dHB1dCBmb3IgYXdzLWNuaSBwbHVnaW4uIFxuICAgKi9cbiAgYXdzVnBjSzhzUGx1Z2luTG9nRmlsZT86IHN0cmluZztcblxuICAvKipcbiAgICogYEFXU19WUENfSzhTX1BMVUdJTl9MT0dfTEVWRUxgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBTdHJpbmcuXG4gICAqIFNwZWNpZmllcyB0aGUgbG9nbGV2ZWwgZm9yIGF3cy1jbmkgcGx1Z2luLlxuICAgKi9cbiAgYXdzVnBjSzhzUGx1Z2luTG9nTGV2ZWw/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIGBDTFVTVEVSX0VORFBPSU5UYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogU3RyaW5nLlxuICAgKiBTcGVjaWZpZXMgdGhlIGNsdXN0ZXIgZW5kcG9pbnQgdG8gdXNlIGZvciBjb25uZWN0aW5nIHRvIFxuICAgKiB0aGUgYXBpLXNlcnZlciB3aXRob3V0IHJlbHlpbmcgb24ga3ViZS1wcm94eS4gXG4gICAqL1xuICBjbHVzdGVyRW5kcG9pbnQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEN1c3RvbU5ldHdvcmtpbmdDb25maWcgaG9sZGluZyBTZWNvbmRhcnkgU3VibmV0IElEcyBmb3IgY3JlYXRpbmcgYEVOSUNvbmZpZ2BcbiAgICovXG4gIGN1c3RvbU5ldHdvcmtpbmdDb25maWc/OiBDdXN0b21OZXR3b3JraW5nQ29uZmlnO1xuXG4gIC8qKlxuICAgKiBgRElTQUJMRV9MRUFLRURfRU5JX0NMRUFOVVBgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBCb29sZWFuLlxuICAgKi9cbiAgZGlzYWJsZUxlYWtlZEVuaUNsZWFudXA/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBgRElTQUJMRV9JTlRST1NQRUNUSU9OYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgICovXG4gIGRpc2FibGVJbnRyb3NwZWN0aW9uPzogYm9vbGVhbjtcblxuICAvKipcbiAgKiBgRElTQUJMRV9NRVRSSUNTYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgcHJvbWV0aGV1cyBtZXRyaWNzIGVuZHBvaW50IGlzIGRpc2FibGVkIG9yIG5vdCBmb3IgXG4gICogaXBhbWQuIEJ5IGRlZmF1bHQgbWV0cmljcyBhcmUgcHVibGlzaGVkIG9uIDo2MTY3OC9tZXRyaWNzLlxuICAqL1xuICBkaXNhYmxlTWV0cmljcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICogYERJU0FCTEVfTkVUV09SS19SRVNPVVJDRV9QUk9WSVNJT05JTkdgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBCb29sZWFuLlxuICAqIFNldHRpbmcgRElTQUJMRV9ORVRXT1JLX1JFU09VUkNFX1BST1ZJU0lPTklORyB0byB0cnVlIHdpbGwgbWFrZSBJUEFNRCBcbiAgKiBkZXBlbmQgb25seSBvbiBJTURTIHRvIGdldCBhdHRhY2hlZCBFTklzIGFuZCBJUHMvcHJlZml4ZXMuXG4gICovXG4gIGRpc2FibGVuZXR3b3JrUmVzb3VyY2VQcm92aXNpb25pbmc/OiBib29sZWFuO1xuXG4gIC8qKlxuICAqIGBESVNBQkxFX1RDUF9FQVJMWV9ERU1VWGAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IEJvb2xlYW4uXG4gICogSWYgRU5BQkxFX1BPRF9FTkkgaXMgc2V0IHRvIHRydWUsIGZvciB0aGUga3ViZWxldCB0byBjb25uZWN0IHZpYSBUQ1BcbiAgKiB0byBwb2RzIHRoYXQgYXJlIHVzaW5nIHBlciBwb2Qgc2VjdXJpdHkgZ3JvdXBzLCBESVNBQkxFX1RDUF9FQVJMWV9ERU1VWCBcbiAgKiBzaG91bGQgYmUgc2V0IHRvIHRydWUgZm9yIGFtYXpvbi1rOHMtY25pLWluaXQgdGhlIGNvbnRhaW5lciB1bmRlciBpbml0Y29udGFpbmVycy5cbiAgKi9cbiAgZGlzYWJsZVRjcEVhcmx5RGVtdXg/OiBib29sZWFuO1xuXG4gIC8qKlxuICAqIGBFTkFCTEVfQkFORFdJRFRIX1BMVUdJTmAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IEJvb2xlYW4uXG4gICogU2V0dGluZyBFTkFCTEVfQkFORFdJRFRIX1BMVUdJTiB0byB0cnVlIHdpbGwgdXBkYXRlIDEwLWF3cy5jb25mbGlzdCB0byBcbiAgKiBpbmNsdWRlIHVwc3RyZWFtIGJhbmR3aWR0aCBwbHVnaW4gYXMgYSBjaGFpbmVkIHBsdWdpbi5cbiAgKi9cbiAgZW5hYmxlQmFuZHdpZHRoUGx1Z2luPzogYm9vbGVhbjtcblxuICAvKipcbiAgKiBgRU5BQkxFX05GVEFCTEVTYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgKiBWUEMgQ05JIHVzZXMgaXB0YWJsZXMtbGVnYWN5IGJ5IGRlZmF1bHQuIFNldHRpbmcgRU5BQkxFX05GVEFCTEVTIFxuICAqIHRvIHRydWUgd2lsbCB1cGRhdGUgVlBDIENOSSB0byB1c2UgaXB0YWJsZXMtbmZ0XG4gICovXG4gIGVuYWJsZU5mdGFibGVzPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogYEVOQUJMRV9QT0RfRU5JYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgKiBTZXR0aW5nIEVOQUJMRV9QT0RfRU5JIHRvIHRydWUgd2lsbCBhbGxvdyBJUEFNRCB0byBhZGQgdGhlIFxuICAqIHZwYy5hbWF6b25hd3MuY29tL2hhcy10cnVuay1hdHRhY2hlZCBsYWJlbCB0byB0aGUgbm9kZSBpZiB0aGUgaW5zdGFuY2UgXG4gICogaGFzIHRoZSBjYXBhY2l0eSB0byBhdHRhY2ggYW4gYWRkaXRpb25hbCBFTkkuXG4gICovXG4gIGVuYWJsZVBvZEVuaT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIGBFTkFCTEVfUFJFRklYX0RFTEVHQVRJT05gIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBCb29sZWFuLlxuICAgKiBUbyBlbmFibGUgcHJlZml4IGRlbGVnYXRpb24gb24gbml0cm8gaW5zdGFuY2VzLiBTZXR0aW5nIFxuICAgKiBFTkFCTEVfUFJFRklYX0RFTEVHQVRJT04gdG8gdHJ1ZSB3aWxsIHN0YXJ0IGFsbG9jYXRpbmcgYSBwcmVmaXggKC8yOCBmb3IgSVB2NCBhbmQgLzgwIGZvciBJUHY2KSBpbnN0ZWFkIG9mIGEgc2Vjb25kYXJ5IElQIGluIHRoZSBFTklzIHN1Ym5ldC4gXG4gICovXG4gIGVuYWJsZVByZWZpeERlbGVnYXRpb24/OiBib29sZWFuO1xuXG4gIC8qKlxuICAqIGBFTkFCTEVfVjZfRUdSRVNTYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogQm9vbGVhbi5cbiAgKiBTcGVjaWZpZXMgd2hldGhlciBQT0RzIGluIGFuIElQdjQgY2x1c3RlciBzdXBwb3J0IElQdjYgZWdyZXNzLiBcbiAgKiBJZiBlbnYgaXMgc2V0IHRvIHRydWUsIHJhbmdlIGZkMDA6OmFjOjAwLzExOCBpcyByZXNlcnZlZCBmb3IgSVB2NiBlZ3Jlc3MuXG4gICovXG4gIGVuYWJsZVY2RWdyZXNzPzogYm9vbGVhbjtcblxuICAvKipcbiAgKiBgRU5JX0NPTkZJR19MQUJFTF9ERUZgIEVudmlyb25tZW50IFZhcmlhYmxlLiBUeXBlOiBTdHJpbmcuXG4gICogU3BlY2lmaWVzIG5vZGUgbGFiZWwga2V5IG5hbWUuIFRoaXMgc2hvdWxkIGJlIHVzZWQgd2hlbiBcbiAgKiBBV1NfVlBDX0s4U19DTklfQ1VTVE9NX05FVFdPUktfQ0ZHPXRydWUuXG4gICovXG4gIGVuaUNvbmZpZ0xhYmVsRGVmPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBgRU5JX0NPTkZJR19BTk5PVEFUSU9OX0RFRmAgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy4gXG4gICAqIFNwZWNpZmllcyBub2RlIGFubm90YXRpb24ga2V5IG5hbWUuIFRoaXMgc2hvdWxkIGJlIHVzZWQgd2hlbiBcbiAgICogQVdTX1ZQQ19LOFNfQ05JX0NVU1RPTV9ORVRXT1JLX0NGRz10cnVlXG4gICovXG4gIGVuaUNvbmZpZ0Fubm90YXRpb25EZWY/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIGBJTlRST1NQRUNUSU9OX0JJTkRfQUREUkVTU2AgRW52aXJvbm1lbnQgVmFyaWFibGUuIFR5cGU6IFN0cmluZy4gXG4gICAqIFNwZWNpZmllcyB0aGUgYmluZCBhZGRyZXNzIGZvciB0aGUgaW50cm9zcGVjdGlvbiBlbmRwb2ludC5cbiAgKi9cbiAgaW50cm9zcGVjdGlvbkJpbmRBZGRyZXNzPzogc3RyaW5nO1xuXG4gIC8qKlxuICAqIGBNQVhfRU5JYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gRm9ybWF0IGludGVnZXIuXG4gICogU3BlY2lmaWVzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBFTklzIHRoYXQgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgbm9kZS4gXG4gICovXG4gIG1heEVuaT86IG51bWJlcjtcblxuICAvKipcbiAgKiBgTUlOSU1VTV9JUF9UQVJHRVRgIEVudmlyb25tZW50IFZhcmlhYmxlLiBGb3JtYXQgaW50ZWdlci5cbiAgKiBTcGVjaWZpZXMgdGhlIG51bWJlciBvZiB0b3RhbCBJUCBhZGRyZXNzZXMgdGhhdCB0aGUgaXBhbWQgXG4gICogZGFlbW9uIHNob3VsZCBhdHRlbXB0IHRvIGFsbG9jYXRlIGZvciBwb2QgYXNzaWdubWVudCBvbiB0aGUgbm9kZS5cbiAgKi9cbiAgbWluaW11bUlwVGFyZ2V0PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBgUE9EX1NFQ1VSSVRZX0dST1VQX0VORk9SQ0lOR19NT0RFYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gVHlwZTogU3RyaW5nLiBcbiAgICogT25jZSBFTkFCTEVfUE9EX0VOSSBpcyBzZXQgdG8gdHJ1ZSwgdGhpcyB2YWx1ZSBjb250cm9scyBob3cgdGhlIHRyYWZmaWMgXG4gICAqIG9mIHBvZHMgd2l0aCB0aGUgc2VjdXJpdHkgZ3JvdXAgYmVoYXZlcy5cbiAgKi9cbiAgcG9kU2VjdXJpdHlHcm91cEVuZm9yY2luZ01vZGU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICogYFdBUk1fRU5JX1RBUkdFVGAgRW52aXJvbm1lbnQgVmFyaWFibGUuIEZvcm1hdCBpbnRlZ2VyLlxuICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGZyZWUgZWxhc3RpYyBuZXR3b3JrIGludGVyZmFjZXMgKGFuZCBhbGwgb2YgdGhlaXIgXG4gICogYXZhaWxhYmxlIElQIGFkZHJlc3NlcykgdGhhdCB0aGUgaXBhbWQgZGFlbW9uIHNob3VsZCBhdHRlbXB0IHRvIGtlZXAgXG4gICogYXZhaWxhYmxlIGZvciBwb2QgYXNzaWdubWVudCBvbiB0aGUgbm9kZS4gXG4gICovXG4gIHdhcm1FbmlUYXJnZXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICogYFdBUk1fSVBfVEFSR0VUYCBFbnZpcm9ubWVudCBWYXJpYWJsZS4gRm9ybWF0IGludGVnZXIuXG4gICogU3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgZnJlZSBJUCBhZGRyZXNzZXMgdGhhdCB0aGUgaXBhbWQgZGFlbW9uIFxuICAqIHNob3VsZCBhdHRlbXB0IHRvIGtlZXAgYXZhaWxhYmxlIGZvciBwb2QgYXNzaWdubWVudCBvbiB0aGUgbm9kZS5cbiAgKi9cbiAgd2FybUlwVGFyZ2V0PzogbnVtYmVyO1xuXG4gIC8qKlxuICAqIGBXQVJNX1BSRUZJWF9UQVJHRVRgIEVudmlyb25tZW50IFZhcmlhYmxlLiBGb3JtYXQgaW50ZWdlci5cbiAgKiBTcGVjaWZpZXMgdGhlIG51bWJlciBvZiBmcmVlIElQdjQoLzI4KSBwcmVmaXhlcyB0aGF0IHRoZSBpcGFtZCBkYWVtb24gXG4gICogc2hvdWxkIGF0dGVtcHQgdG8ga2VlcCBhdmFpbGFibGUgZm9yIHBvZCBhc3NpZ25tZW50IG9uIHRoZSBub2RlLlxuICAqL1xuICB3YXJtUHJlZml4VGFyZ2V0PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJZiBzcGVjaWZpZWQsIGFuIElSU0EgYWNjb3VudCB3aWxsIGJlIGNyZWF0ZWQgZm9yIHRoZSBWUEMtQ05JIGFkZC1vbiB3aXRoIHRoZSBJUlNBIHJvbGVcbiAgICogaGF2aW5nIHRoZSBzcGVjaWZpZWQgbWFuYWdlZCBwb2xpY2llcy4gV2hlbiBzcGVjaWZpZWQsIHRoZSBub2RlIHJvbGUgZm9yIHRoZSBjbHVzdGVyIHByb3ZpZGVyIGNhbiBiZSBjb25maWd1cmVkIFxuICAgKiB3aXRob3V0IHRoZSBDTkkgcG9saWN5LiBcbiAgICogXG4gICAqIEZvciBJUHY0IHRoZSByZXF1aXJlZCBtYW5hZ2VkIHBvbGljeSBpcyBBbWF6b25FS1NfQ05JX1BvbGljeS5cbiAgICogQGV4YW1wbGVcbiAgICogc2VydmljZUFjY291bnRQb2xpY2llczogW01hbmFnZWRQb2xpY3kuZnJvbUF3c01hbmFnZWRQb2xpY3lOYW1lKFwiQW1hem9uRUtTX0NOSV9Qb2xpY3lcIildXG4gICAqIFxuICAgKi9cbiAgc2VydmljZUFjY291bnRQb2xpY2llcz86IGlhbS5JTWFuYWdlZFBvbGljeVtdO1xuXG4gIC8qKlxuICAgKiBFbmFibGUga3ViZXJuZXRlcyBuZXR3b3JrIHBvbGljeSBpbiB0aGUgVlBDIENOSSBpbnRyb2R1Y2VkIGluIHZwYy1jbmkgMS4xNFxuICAgKiBNb3JlIGluZm9ybWF0b24gb24gb2ZmaWNpYWwgQVdTIGRvY3VtZW50YXRpb246IGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9la3MvbGF0ZXN0L3VzZXJndWlkZS9jbmktbmV0d29yay1wb2xpY3kuaHRtbFxuICAgKiBcbiAgICovXG4gIGVuYWJsZU5ldHdvcmtQb2xpY3k/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFbmFibGUgd2luZG93cyBzdXBwb3J0IGZvciB5b3VyIGNsdXN0ZXJcbiAgICogXG4gICAqL1xuICBlbmFibGVXaW5kb3dzSXBhbT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBwcmVmaXggZGVsZWdhdGlvbiBmb3IgV2luZG93cyBub2Rlc1xuICAgKi9cbiAgZW5hYmxlV2luZG93c1ByZWZpeERlbGVnYXRpb24/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBgd2FybS1wcmVmaXgtdGFyZ2V0YCB2YWx1ZSBpbiBhbWF6b24tdnBjLWNuaSBjb25maWcgbWFwLiBGb3JtYXQgaW50ZWdlci5cbiAgICogU3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgZnJlZSBJUHY0KC8yOCkgcHJlZml4ZXMgdGhhdCB0aGUgaXBhbWQgZGFlbW9uXG4gICAqIHNob3VsZCBhdHRlbXB0IHRvIGtlZXAgYXZhaWxhYmxlIGZvciBwb2QgYXNzaWdubWVudCBvbiBXaW5kb3dzIG5vZGVzLlxuICAgKi9cbiAgd2FybVdpbmRvd3NQcmVmaXhUYXJnZXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGB3YXJtLWlwLXRhcmdldGAgdmFsdWUgaW4gYW1hem9uLXZwYy1jbmkgY29uZmlnIG1hcC4gRm9ybWF0IGludGVnZXIuXG4gICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGZyZWUgSVAgYWRkcmVzc2VzIHRoYXQgdGhlIGlwYW1kIGRhZW1vblxuICAgKiBzaG91bGQgYXR0ZW1wdCB0byBrZWVwIGF2YWlsYWJsZSBmb3IgcG9kIGFzc2lnbm1lbnQgb24gV2luZG93cyBub2Rlcy5cbiAgICovXG4gIHdhcm1XaW5kb3dzSVBUYXJnZXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGBtaW5pbXVtLWlwLXRhcmdldGAgdmFsdWUgaW4gYW1hem9uLXZwYy1jbmkgY29uZmlnIG1hcC4gRm9ybWF0IGludGVnZXIuXG4gICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHRvdGFsIElQIGFkZHJlc3NlcyB0aGF0IHRoZSBpcGFtZFxuICAgKiBkYWVtb24gc2hvdWxkIGF0dGVtcHQgdG8gYWxsb2NhdGUgZm9yIHBvZCBhc3NpZ25tZW50IG9uIGEgV2luZG93cyBub2Rlcy5cbiAgICovXG4gIG1pbmltdW1XaW5kb3dzSVBUYXJnZXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGBicmFuY2gtZW5pLWNvb2xkb3duYCB2YWx1ZSBpbiBhbWF6b24tdnBjLWNuaSBjb25maWcgbWFwLiBGb3JtYXQgaW50ZWdlci5cbiAgICovXG4gIGJyYW5jaEVOSUNvb2xkb3duPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBWZXJzaW9uIG9mIHRoZSBhZGQtb24gdG8gdXNlLiBNdXN0IG1hdGNoIHRoZSB2ZXJzaW9uIG9mIHRoZSBjbHVzdGVyIHdoZXJlIGl0XG4gICAqIHdpbGwgYmUgZGVwbG95ZWQuXG4gICAqL1xuXG4gIHZlcnNpb24/OiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21OZXR3b3JraW5nQ29uZmlnIHtcbiAgLyoqXG4gICAqIFNlY29uZGFyeSBzdWJuZXRzIG9mIHlvdXIgVlBDXG4gICAqL1xuICByZWFkb25seSBzdWJuZXRzPzogSVN1Ym5ldFtdO1xuICAvKipcbiAgICogU2VjdXJpdHkgZ3JvdXAgb2Ygc2Vjb25kYXJ5IEVOSVxuICAgKi9cbiAgcmVhZG9ubHkgc2VjdXJpdHlHcm91cD86IElTZWN1cml0eUdyb3VwO1xufVxuXG5jb25zdCBkZWZhdWx0UHJvcHM6IENvcmVBZGRPblByb3BzID0ge1xuICBhZGRPbk5hbWU6ICd2cGMtY25pJyxcbiAgdmVyc2lvbjogJ2F1dG8nLFxuICB2ZXJzaW9uTWFwOiB2ZXJzaW9uTWFwLFxuICBzYU5hbWU6ICdhd3Mtbm9kZScsXG4gIG5hbWVzcGFjZTogJ2t1YmUtc3lzdGVtJyxcbiAgY29udHJvbFBsYW5lQWRkT246IGZhbHNlLFxuICBjb25maWd1cmF0aW9uVmFsdWVzOiB7fVxufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBWcGNDbmkgRUtTIGFkZC1vbiB3aXRoIEFkdmFuY2VkIENvbmZpZ3VyYXRpb25zLlxuICovXG5Ac3VwcG9ydHNBTExcbmV4cG9ydCBjbGFzcyBWcGNDbmlBZGRPbiBleHRlbmRzIENvcmVBZGRPbiB7XG5cbiAgcmVhZG9ubHkgdnBjQ25pQWRkT25Qcm9wczogVnBjQ25pQWRkT25Qcm9wcztcbiAgcmVhZG9ubHkgaWQ/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJvcHM/OiBWcGNDbmlBZGRPblByb3BzKSB7XG4gICAgc3VwZXIoeyAuLi5kZWZhdWx0UHJvcHMsIC4uLnByb3BzIH0pO1xuICAgIHRoaXMudnBjQ25pQWRkT25Qcm9wcyA9IHsgLi4uZGVmYXVsdFByb3BzLCAuLi5wcm9wcyB9O1xuICAgICh0aGlzLmNvcmVBZGRPblByb3BzLmNvbmZpZ3VyYXRpb25WYWx1ZXMgYXMgYW55KSA9IHBvcHVsYXRlVnBjQ25pQ29uZmlndXJhdGlvblZhbHVlcyhwcm9wcyk7XG4gIH1cblxuICBAY29uZmxpY3RzV2l0aEF1dG9Nb2RlKFwidjEuMTkuMC1la3NidWlsZC4xXCIpXG4gIGRlcGxveShjbHVzdGVySW5mbzogQ2x1c3RlckluZm8pOiBQcm9taXNlPENvbnN0cnVjdD4ge1xuICAgIGNvbnN0IGNsdXN0ZXIgPSBjbHVzdGVySW5mby5jbHVzdGVyO1xuICAgIGxldCBzZWN1cml0eUdyb3VwSWQgPSBjbHVzdGVyLmNsdXN0ZXJTZWN1cml0eUdyb3VwSWQ7XG5cbiAgICBpZiAodGhpcy52cGNDbmlBZGRPblByb3BzLmN1c3RvbU5ldHdvcmtpbmdDb25maWc/LnNlY3VyaXR5R3JvdXApIHtcbiAgICAgIHNlY3VyaXR5R3JvdXBJZCA9IHRoaXMudnBjQ25pQWRkT25Qcm9wcy5jdXN0b21OZXR3b3JraW5nQ29uZmlnLnNlY3VyaXR5R3JvdXAuc2VjdXJpdHlHcm91cElkO1xuICAgIH1cblxuICAgIGlmICgodGhpcy52cGNDbmlBZGRPblByb3BzLmN1c3RvbU5ldHdvcmtpbmdDb25maWc/LnN1Ym5ldHMpKSB7XG4gICAgICBmb3IgKGxldCBzdWJuZXQgb2YgdGhpcy52cGNDbmlBZGRPblByb3BzLmN1c3RvbU5ldHdvcmtpbmdDb25maWcuc3VibmV0cykge1xuICAgICAgICBjb25zdCBkb2MgPSByZWFkWWFtbERvY3VtZW50KF9fZGlybmFtZSArICcvZW5pQ29uZmlnLnl0cGwnKTtcbiAgICAgICAgY29uc3QgbWFuaWZlc3QgPSBkb2Muc3BsaXQoXCItLS1cIikubWFwKGUgPT4gbG9hZFlhbWwoZSkpO1xuICAgICAgICBjb25zdCB2YWx1ZXM6IFZhbHVlcyA9IHtcbiAgICAgICAgICBhdmFpbGFiaWxpdHlab25lOiBzdWJuZXQuYXZhaWxhYmlsaXR5Wm9uZSxcbiAgICAgICAgICBzZWN1cml0eUdyb3VwSWQ6IHNlY3VyaXR5R3JvdXBJZCxcbiAgICAgICAgICBzdWJuZXRJZDogc3VibmV0LnN1Ym5ldElkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0RGVwbG95bWVudDogTWFuaWZlc3REZXBsb3ltZW50ID0ge1xuICAgICAgICAgIG5hbWU6IFwiRW5pQ3VzdG9tQ29uZmlnXCIgKyBzdWJuZXQsXG4gICAgICAgICAgbmFtZXNwYWNlOiB0aGlzLmNvcmVBZGRPblByb3BzLm5hbWVzcGFjZSEsXG4gICAgICAgICAgbWFuaWZlc3QsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBrdWJlY3RsUHJvdmlkZXIgPSBuZXcgS3ViZWN0bFByb3ZpZGVyKGNsdXN0ZXJJbmZvKTtcbiAgICAgICAga3ViZWN0bFByb3ZpZGVyLmFkZE1hbmlmZXN0KG1hbmlmZXN0RGVwbG95bWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZE9uUHJvbWlzZSA9IHN1cGVyLmRlcGxveShjbHVzdGVySW5mbyk7XG4gICAgcmV0dXJuIGFkZE9uUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGNvcmUgbWV0aG9kIHRvIHByb3ZpZGUgbWFuYWdlZCBwb2xpY2llcy5cbiAgICogQHBhcmFtIF9jbHVzdGVySW5mbyBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwcm92aWRlTWFuYWdlZFBvbGljaWVzKF9jbHVzdGVySW5mbzogQ2x1c3RlckluZm8pOiBpYW0uSU1hbmFnZWRQb2xpY3lbXSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudnBjQ25pQWRkT25Qcm9wcy5zZXJ2aWNlQWNjb3VudFBvbGljaWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgY29yZSBhZGRvbiBtZXRob2QgaW4gb3JkZXIgdG8gcmVwbGFjZSB0aGUgU0EgaWYgZXhpc3RzICh3aGljaCBpcyB0aGUgY2FzZSBmb3IgYXdzLW5vZGUpLlxuICAgKiBAcGFyYW0gY2x1c3RlckluZm8gXG4gICAqIEBwYXJhbSBzYU5hbWVzcGFjZSBcbiAgICogQHBhcmFtIHBvbGljaWVzIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGNyZWF0ZVNlcnZpY2VBY2NvdW50KGNsdXN0ZXJJbmZvOiBDbHVzdGVySW5mbywgc2FOYW1lc3BhY2U6IHN0cmluZywgcG9saWNpZXM6IGlhbS5JTWFuYWdlZFBvbGljeVtdKTogZWtzLlNlcnZpY2VBY2NvdW50IHtcbiAgICBjb25zdCBzYSA9IG5ldyBSZXBsYWNlU2VydmljZUFjY291bnQoY2x1c3RlckluZm8uY2x1c3RlciwgYCR7dGhpcy5jb3JlQWRkT25Qcm9wcy5zYU5hbWV9LXNhYCwge1xuICAgICAgY2x1c3RlcjogY2x1c3RlckluZm8uY2x1c3RlcixcbiAgICAgIG5hbWU6IHRoaXMuY29yZUFkZE9uUHJvcHMuc2FOYW1lLFxuICAgICAgbmFtZXNwYWNlOiBzYU5hbWVzcGFjZVxuICAgIH0pO1xuXG4gICAgcG9saWNpZXMuZm9yRWFjaChwID0+IHNhLnJvbGUuYWRkTWFuYWdlZFBvbGljeShwKSk7XG4gICAgcmV0dXJuIHNhIGFzIGFueSBhcyBla3MuU2VydmljZUFjY291bnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGFsbCBWYWx1ZXMgaW5jbHVkaW5nIG5lc3RlZCBjaGlsZCBvYmplY3RzIGFuZCByZW1vdmVzIHVuZGVmaW5lZCBlbnRyaWVzXG4gKi9cbmZ1bmN0aW9uIFJlbW92ZVVuZGVmaW5lZChoZWxtVmFsdWVzOiBWYWx1ZXMpOiB2b2lkIHtcbiAgT2JqZWN0LmtleXMoaGVsbVZhbHVlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmIChoZWxtVmFsdWVzW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIGhlbG1WYWx1ZXNba2V5XTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGhlbG1WYWx1ZXNba2V5XSA9PT0gJ29iamVjdCcpe1xuICAgICAgUmVtb3ZlVW5kZWZpbmVkKGhlbG1WYWx1ZXNba2V5XSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVWcGNDbmlDb25maWd1cmF0aW9uVmFsdWVzKHByb3BzPzogVnBjQ25pQWRkT25Qcm9wcyk6IFZhbHVlcyB7XG4gIGlmIChwcm9wcyA9PT0gbnVsbCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdDogVmFsdWVzID0ge1xuICAgIGluaXQ6IHtcbiAgICAgIGVudjoge1xuICAgICAgICBESVNBQkxFX1RDUF9FQVJMWV9ERU1VWDogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmRpc2FibGVUY3BFYXJseURlbXV4KSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgICAgRU5BQkxFX1Y2X0VHUkVTUzogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmVuYWJsZVY2RWdyZXNzKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgIH1cbiAgICB9LFxuICAgIGVudjoge1xuICAgICAgQVdTX0VDMl9FTkRQT0lOVDogcHJvcHM/LmF3c0VjMkVuZHBvaW50LCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIEFERElUSU9OQUxfRU5JX1RBR1M6IHByb3BzPy5hZGRpdGlvbmFsRW5pVGFncywgLy8gdHlwZTogc3RyaW5nXG4gICAgICBBTk5PVEFURV9QT0RfSVA6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5hbm5vdGF0ZVBvZElwKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgIEFXU19FWFRFUk5BTF9TRVJWSUNFX0NJRFI6IHByb3BzPy5hd3NFeHRlcm5hbFNlcnZpY2VDaWRycywgLy8gdHlwZTogc3RyaW5nXG4gICAgICBBV1NfTUFOQUdFX0VOSVNfTk9OX1NDSEVEVUxBQkxFOiBKU09OLnN0cmluZ2lmeShwcm9wcz8uYXdzTWFuYWdlRW5pc05vblNjaGVkdWxhYmxlKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgIEFXU19WUENfQ05JX05PREVfUE9SVF9TVVBQT1JUOiBKU09OLnN0cmluZ2lmeShwcm9wcz8uYXdzVnBjQ25pTm9kZVBvcnRTdXBwb3J0KSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgIEFXU19WUENfRU5JX01UVTogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmF3c1ZwY0VuaU10dSksIC8vIGZvcm1hdDogaW50ZWdlciwgdHlwZTogc3RyaW5nXG4gICAgICBBV1NfVlBDX0s4U19DTklfQ1VTVE9NX05FVFdPUktfQ0ZHOiBKU09OLnN0cmluZ2lmeShwcm9wcz8uYXdzVnBjSzhzQ25pQ3VzdG9tTmV0d29ya0NmZyksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBBV1NfVlBDX0s4U19DTklfRVhDTFVERV9TTkFUX0NJRFJTOiBwcm9wcz8uYXdzVnBjSzhzRXhjbHVkZVNuYXRDaWRycywgLy8gdHlwZTogc3RyaW5nXG4gICAgICBFTklfQ09ORklHX0xBQkVMX0RFRjogcHJvcHM/LmVuaUNvbmZpZ0xhYmVsRGVmLCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIEVOSV9DT05GSUdfQU5OT1RBVElPTl9ERUY6IHByb3BzPy5lbmlDb25maWdBbm5vdGF0aW9uRGVmLCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIEFXU19WUENfSzhTX0NOSV9FWFRFUk5BTFNOQVQ6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5hd3NWcGNLOHNDbmlFeHRlcm5hbFNuYXQpLCAvLyBmb3JtYXQ6IGJvb2xlYW4sIHR5cGU6IHN0cmluZ1xuICAgICAgQVdTX1ZQQ19LOFNfQ05JX0xPR0xFVkVMOiBwcm9wcz8uYXdzVnBjSzhzQ25pTG9nTGV2ZWwsIC8vIHR5cGU6IHN0cmluZ1xuICAgICAgQVdTX1ZQQ19LOFNfQ05JX0xPR19GSUxFOiBwcm9wcz8uYXdzVnBjSzhzQ25pTG9nRmlsZSwgLy8gdHlwZTogc3RyaW5nXG4gICAgICBBV1NfVlBDX0s4U19DTklfUkFORE9NSVpFU05BVDogcHJvcHM/LmF3c1ZwY0s4c0NuaVJhbmRvbWl6ZVNuYXQsIC8vIHR5cGU6IHN0cmluZ1xuICAgICAgQVdTX1ZQQ19LOFNfQ05JX1ZFVEhQUkVGSVg6IHByb3BzPy5hd3NWcGNLOHNDbmlWZXRoUHJlZml4LCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIEFXU19WUENfSzhTX1BMVUdJTl9MT0dfRklMRTogcHJvcHM/LmF3c1ZwY0s4c1BsdWdpbkxvZ0ZpbGUsIC8vIHR5cGU6IHN0cmluZ1xuICAgICAgQVdTX1ZQQ19LOFNfUExVR0lOX0xPR19MRVZFTDogcHJvcHM/LmF3c1ZwY0s4c1BsdWdpbkxvZ0xldmVsLCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIENMVVNURVJfRU5EUE9JTlQ6IHByb3BzPy5jbHVzdGVyRW5kcG9pbnQsIC8vIHR5cGU6IHN0cmluZ1xuICAgICAgRElTQUJMRV9MRUFLRURfRU5JX0NMRUFOVVA6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5kaXNhYmxlTGVha2VkRW5pQ2xlYW51cCksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBESVNBQkxFX0lOVFJPU1BFQ1RJT046IEpTT04uc3RyaW5naWZ5KHByb3BzPy5kaXNhYmxlSW50cm9zcGVjdGlvbiksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBESVNBQkxFX01FVFJJQ1M6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5kaXNhYmxlTWV0cmljcyksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBESVNBQkxFX05FVFdPUktfUkVTT1VSQ0VfUFJPVklTSU9OSU5HOiBKU09OLnN0cmluZ2lmeShwcm9wcz8uZGlzYWJsZW5ldHdvcmtSZXNvdXJjZVByb3Zpc2lvbmluZyksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBFTkFCTEVfQkFORFdJRFRIX1BMVUdJTjogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmVuYWJsZUJhbmR3aWR0aFBsdWdpbiksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBFTkFCTEVfTkZUQUJMRVM6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5lbmFibGVOZnRhYmxlcyksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBFTkFCTEVfUE9EX0VOSTogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmVuYWJsZVBvZEVuaSksIC8vIGZvcm1hdDogYm9vbGVhbiwgdHlwZTogc3RyaW5nXG4gICAgICBFTkFCTEVfUFJFRklYX0RFTEVHQVRJT046IEpTT04uc3RyaW5naWZ5KHByb3BzPy5lbmFibGVQcmVmaXhEZWxlZ2F0aW9uKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICAgIElOVFJPU1BFQ1RJT05fQklORF9BRERSRVNTOiBwcm9wcz8uaW50cm9zcGVjdGlvbkJpbmRBZGRyZXNzLCAvLyB0eXBlOiBzdHJpbmdcbiAgICAgIE1BWF9FTkk6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5tYXhFbmkpLCAvLyBmb3JtYXQ6IGludGVnZXIsIHR5cGU6IHN0cmluZ1xuICAgICAgTUlOSU1VTV9JUF9UQVJHRVQ6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5taW5pbXVtSXBUYXJnZXQpLCAvLyBmb3JtYXQ6IGludGVnZXIsIHR5cGU6IHN0cmluZ1xuICAgICAgUE9EX1NFQ1VSSVRZX0dST1VQX0VORk9SQ0lOR19NT0RFOiBwcm9wcz8ucG9kU2VjdXJpdHlHcm91cEVuZm9yY2luZ01vZGUsIC8vIHR5cGU6IHN0cmluZ1xuICAgICAgV0FSTV9FTklfVEFSR0VUOiBKU09OLnN0cmluZ2lmeShwcm9wcz8ud2FybUVuaVRhcmdldCksIC8vIGZvcm1hdDogaW50ZWdlciwgdHlwZTogc3RyaW5nXG4gICAgICBXQVJNX0lQX1RBUkdFVDogSlNPTi5zdHJpbmdpZnkocHJvcHM/Lndhcm1JcFRhcmdldCksIC8vIGZvcm1hdDogaW50ZWdlciwgdHlwZTogc3RyaW5nXG4gICAgICBXQVJNX1BSRUZJWF9UQVJHRVQ6IEpTT04uc3RyaW5naWZ5KHByb3BzPy53YXJtUHJlZml4VGFyZ2V0KSwgLy8gZm9ybWF0OiBpbnRlZ2VyLCB0eXBlOiBzdHJpbmdcbiAgICB9LFxuICAgIGVuYWJsZU5ldHdvcmtQb2xpY3k6IEpTT04uc3RyaW5naWZ5KHByb3BzPy5lbmFibGVOZXR3b3JrUG9saWN5KSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICBlbmFibGVXaW5kb3dzSXBhbTogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmVuYWJsZVdpbmRvd3NJcGFtKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICBlbmFibGVXaW5kb3dzUHJlZml4RGVsZWdhdGlvbjogSlNPTi5zdHJpbmdpZnkocHJvcHM/LmVuYWJsZVdpbmRvd3NQcmVmaXhEZWxlZ2F0aW9uKSwgLy8gZm9ybWF0OiBib29sZWFuLCB0eXBlOiBzdHJpbmdcbiAgICB3YXJtV2luZG93c1ByZWZpeFRhcmdldDogcHJvcHM/Lndhcm1XaW5kb3dzUHJlZml4VGFyZ2V0LCAvLyB0eXBlOiBpbnRlZ2VyXG4gICAgd2FybVdpbmRvd3NJUFRhcmdldDogcHJvcHM/Lndhcm1XaW5kb3dzSVBUYXJnZXQsIC8vIHR5cGU6IGludGVnZXJcbiAgICBtaW5pbXVtV2luZG93c0lQVGFyZ2V0OiBwcm9wcz8ubWluaW11bVdpbmRvd3NJUFRhcmdldCwgLy8gdHlwZTogaW50ZWdlclxuICAgIGJyYW5jaEVOSUNvb2xkb3duOiBwcm9wcz8uYnJhbmNoRU5JQ29vbGRvd24sIC8vIHR5cGU6IGludGVnZXJcbiAgfTtcblxuICBSZW1vdmVVbmRlZmluZWQocmVzdWx0KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIl19