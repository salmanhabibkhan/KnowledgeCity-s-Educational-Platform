"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GitOpsMode = exports.ClusterInfo = exports.GlobalResources = exports.ResourceContext = exports.ApplicationRepositoryConstraints = void 0;
const assert = require("assert");
const log_utils_1 = require("../utils/log-utils");
const constraints = require("../utils/constraints-utils");
/**
 * Adds Constraints to application repository
 */
class ApplicationRepositoryConstraints {
    constructor() {
        this.credentialsSecretName = new constraints.InternetHostStringConstraint();
    }
}
exports.ApplicationRepositoryConstraints = ApplicationRepositoryConstraints;
/**
 * Provides API to register resource providers and get access to the provided resources.
 */
class ResourceContext {
    constructor(scope, blueprintProps) {
        this.scope = scope;
        this.blueprintProps = blueprintProps;
        this.resources = new Map();
    }
    /**
     * Adds a new resource provider and specifies the name under which the provided resource will be registered,
     * @param name Specifies the name key under which the provided resources will be registered for subsequent look-ups.
     * @param provider Implementation of the resource provider interface
     * @returns the provided resource
     */
    add(name, provider) {
        const resource = provider.provide(this);
        assert(!this.resources.has(name), `Overwriting ${name} resource during execution is not allowed.`);
        this.resources.set(name, resource);
        return resource;
    }
    /**
     * Gets the provided resource by the supplied name.
     * @param name under which the resource provider was registered
     * @returns the resource or undefined if the specified resource was not found
     */
    get(name) {
        return this.resources.get(name);
    }
}
exports.ResourceContext = ResourceContext;
var GlobalResources;
(function (GlobalResources) {
    GlobalResources["Vpc"] = "vpc";
    GlobalResources["HostedZone"] = "hosted-zone";
    GlobalResources["Certificate"] = "certificate";
    GlobalResources["KmsKey"] = "kms-key";
    GlobalResources["Amp"] = "amp";
})(GlobalResources || (exports.GlobalResources = GlobalResources = {}));
/**
 * Cluster info supplies required information on the cluster configuration, registered resources and add-ons
 * which could be leveraged by the framework, add-on implementations and teams.
 */
class ClusterInfo {
    /**
     * Constructor for ClusterInfo
     * @param props
     */
    constructor(cluster, version, nodeGroups, autoscalingGroups, autoMode, fargateProfiles, clusterv2, nodegroupsv2) {
        this.cluster = cluster;
        this.version = version;
        this.nodeGroups = nodeGroups;
        this.autoscalingGroups = autoscalingGroups;
        this.autoMode = autoMode;
        this.fargateProfiles = fargateProfiles;
        this.clusterv2 = clusterv2;
        this.nodegroupsv2 = nodegroupsv2;
        this.cluster = cluster;
        this.provisionedAddOns = new Map();
        this.scheduledAddOns = new Map();
        this.orderedAddOns = [];
        this.addonContext = new Map();
    }
    /**
     * Provides the resource context object associated with this instance of the EKS Blueprint.
     * @returns resource context object
     */
    getResourceContext() {
        return this.resourceContext;
    }
    /**
     * Injection method to provide resource context.
     * @param resourceContext
     */
    setResourceContext(resourceContext) {
        this.resourceContext = resourceContext;
    }
    /**
     * Update provisionedAddOns map
     * @param addOn
     * @param construct
     */
    addProvisionedAddOn(addOn, construct) {
        this.orderedAddOns.forEach(e => {
            const provisionedOrdered = this.provisionedAddOns.get(e);
            if (provisionedOrdered) {
                log_utils_1.logger.debug(`Adding dependency from ${addOn} to ${e}`);
                construct.node.addDependency(provisionedOrdered);
            }
        });
        this.provisionedAddOns.set(addOn, construct);
    }
    /**
     * Given the addOn name, return the provisioned addOn construct
     * @param addOn
     * @returns undefined
     */
    getProvisionedAddOn(addOn) {
        return this.provisionedAddOns.get(addOn);
    }
    /**
     * Returns all provisioned addons
     * @returns scheduledAddOns: Map<string, cdk.Construct>
     */
    getAllProvisionedAddons() {
        return this.provisionedAddOns;
    }
    /**
     * Set the preProvisionedAddOn map with the promise for the construct
     * of the addon being provisioned
     * @param addOn
     * @param promise
     * @param ordered if addon depends on previous addons for completion (runs serially)
     */
    addScheduledAddOn(addOn, promise, ordered) {
        this.scheduledAddOns.set(addOn, promise);
        if (ordered) {
            this.orderedAddOns.push(addOn);
        }
    }
    /**
     * Indicates if strict ordering is applied to the addon
     * @param addOn addOn key
     * @returns
     */
    isOrderedAddOn(addOn) {
        return this.orderedAddOns.includes(addOn);
    }
    /**
     * Returns the promise for the Addon construct
     * @param addOn
     * @returns Promise<cdk.Construct>
     */
    getScheduledAddOn(addOn) {
        return this.scheduledAddOns.get(addOn);
    }
    /**
     * Returns all scheduled addons
     * @returns scheduledAddOns: Map<string, Promise<cdk.Construct>>
     */
    getAllScheduledAddons() {
        return this.scheduledAddOns;
    }
    /**
     * Provides the resource registered under supplied name
     * @param name of the resource to be returned
     * @returns Resource object or undefined if no resource was found
     */
    getResource(name) {
        return this.resourceContext.get(name);
    }
    /**
     * Same as {@link getResource} but will fail if the specified resource is not found
     * @param name of the resource to be returned
     * @returns Resource object (fails if not found)
     */
    getRequiredResource(name) {
        const result = this.resourceContext.get(name);
        assert(result, 'Required resource ' + name + ' is missing.');
        return result;
    }
    /**
     * Update addonContext map
     * @param addOn
     * @param Values
     */
    addAddOnContext(addOn, values) {
        this.addonContext.set(addOn, values);
    }
    /**
    * Returns all addon contexts
    * @returns addonContext: Map<string, Values>
    */
    getAddOnContexts() {
        return this.addonContext;
    }
}
exports.ClusterInfo = ClusterInfo;
/**
 * Enum type for two different GitOps operating modes
 */
var GitOpsMode;
(function (GitOpsMode) {
    /**
     * CDK deploys the `Application` resource for each AddOn enabled or customer workloads,
     * and ArgoCD deploys the actual AddOn and workloads via GitOps based on the `Application` resource.
     */
    GitOpsMode[GitOpsMode["APPLICATION"] = 0] = "APPLICATION";
    /**
     * CDK deploys only one `Application` resource for the App of Apps, aka `bootstrap-apps`,
     * and ArgoCD deploys all the AddOns based on the child `Application` defined in `bootstrap-apps`.
     */
    GitOpsMode[GitOpsMode["APP_OF_APPS"] = 1] = "APP_OF_APPS";
})(GitOpsMode || (exports.GitOpsMode = GitOpsMode = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvc3BpL3R5cGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUFpQztBQVFqQyxrREFBNEM7QUFDNUMsMERBQTBEO0FBdUcxRDs7R0FFRztBQUNILE1BQWEsZ0NBQWdDO0lBQTdDO1FBQ0ksMEJBQXFCLEdBQUcsSUFBSSxXQUFXLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztJQUMzRSxDQUFDO0NBQUE7QUFGRCw0RUFFQztBQUVEOztHQUVHO0FBQ0gsTUFBYSxlQUFlO0lBSXhCLFlBQTRCLEtBQWdCLEVBQWtCLGNBQWlDO1FBQW5FLFVBQUssR0FBTCxLQUFLLENBQVc7UUFBa0IsbUJBQWMsR0FBZCxjQUFjLENBQW1CO1FBRjlFLGNBQVMsR0FBNEIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUVtQyxDQUFDO0lBRXBHOzs7OztPQUtHO0lBQ0ksR0FBRyxDQUF1QixJQUFZLEVBQUUsUUFBNkI7UUFDeEUsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFlLElBQUksNENBQTRDLENBQUMsQ0FBQztRQUNuRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDbkMsT0FBTyxRQUFRLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxHQUFHLENBQW9DLElBQVk7UUFDdEQsT0FBVSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBQ0o7QUEzQkQsMENBMkJDO0FBRUQsSUFBWSxlQU1YO0FBTkQsV0FBWSxlQUFlO0lBQ3ZCLDhCQUFXLENBQUE7SUFDWCw2Q0FBMEIsQ0FBQTtJQUMxQiw4Q0FB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QUM7SUFDM0MsQ0FBQztJQUVEOzs7T0FHRztJQUNJLHFCQUFxQjtRQUN4QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxXQUFXLENBQTBCLElBQVk7UUFDcEQsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBSSxJQUFJLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLG1CQUFtQixDQUEwQixJQUFZO1FBQzVELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ2pELE1BQU0sQ0FBQyxNQUFNLEVBQUUsb0JBQW9CLEdBQUcsSUFBSSxHQUFHLGNBQWMsQ0FBQyxDQUFDO1FBQzdELE9BQU8sTUFBTyxDQUFDO0lBQ25CLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksZUFBZSxDQUFDLEtBQWEsRUFBRSxNQUFjO1FBQ2hELElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7OztNQUdFO0lBQ0ssZ0JBQWdCO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0NBQ0o7QUFuSkQsa0NBbUpDO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFVBV1g7QUFYRCxXQUFZLFVBQVU7SUFDbEI7OztPQUdHO0lBQ0gseURBQVcsQ0FBQTtJQUNYOzs7T0FHRztJQUNILHlEQUFXLENBQUE7QUFDZixDQUFDLEVBWFcsVUFBVSwwQkFBVixVQUFVLFFBV3JCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIjtcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBBdXRvU2NhbGluZ0dyb3VwIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWF1dG9zY2FsaW5nJztcbmltcG9ydCAqIGFzIGVrcyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWtzJztcbmltcG9ydCAqIGFzIGVrc3YyIGZyb20gJ0Bhd3MtY2RrL2F3cy1la3MtdjItYWxwaGEnO1xuaW1wb3J0IHsgQ29uc3RydWN0LCBJQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cyc7XG5pbXBvcnQgeyBSZXNvdXJjZVByb3ZpZGVyIH0gZnJvbSAnLic7XG5pbXBvcnQgeyBFa3NCbHVlcHJpbnRQcm9wcyB9IGZyb20gJy4uL3N0YWNrcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiLi4vdXRpbHMvbG9nLXV0aWxzXCI7XG5pbXBvcnQgKiBhcyBjb25zdHJhaW50cyBmcm9tICcuLi91dGlscy9jb25zdHJhaW50cy11dGlscyc7XG5pbXBvcnQgeyBFYnNEZXZpY2VWb2x1bWVUeXBlIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjMic7XG5cbi8qKlxuICogRGF0YSB0eXBlIGRlZmluaW5nIGhlbG0gcmVwb3NpdG9yaWVzIGZvciBHaXRPcHMgYm9vdHN0cmFwcGluZy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIZWxtUmVwb3NpdG9yeSB7XG4gICAgcmVwb1VybDogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICB1c2VybmFtZT86IHN0cmluZyxcbiAgICBwYXNzd29yZD86IHN0cmluZ1xufVxuXG4vKipcbiAqIFV0aWxpdHkgdHlwZSBmb3IgdmFsdWVzIHBhc3NlZCB0byBIZWxtIG9yIEdpdE9wcyBhcHBsaWNhdGlvbnMuXG4gKi9cbmV4cG9ydCB0eXBlIFZhbHVlcyA9IHtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgdHlwZSBmb3IgS3ViZXJuZXRlcyB0YWludHMgcGFzc2VkIHRvIEhlbG0gb3IgR2l0T3BzIGFwcGxpY2F0aW9ucy5cbiAqL1xuZXhwb3J0IHR5cGUgVGFpbnQgPSB7XG4gICAga2V5OiBzdHJpbmcsXG4gICAgdmFsdWU/OiBzdHJpbmcsXG4gICAgZWZmZWN0OiBcIk5vU2NoZWR1bGVcIiB8IFwiUHJlZmVyTm9TY2hlZHVsZVwiIHwgXCJOb0V4ZWN1dGVcIixcbn07XG5cbi8vIHNpbXBsZSB0eXBlcyBmb3IgdmFyaW91cyB0aW1lLWJvdW5kIHByb3BlcnR5IHZhbHVlc1xuZXhwb3J0IHR5cGUgU2VjID0gYCR7bnVtYmVyfXNgO1xuZXhwb3J0IHR5cGUgTWluID0gYCR7bnVtYmVyfW1gO1xuZXhwb3J0IHR5cGUgSG91ciA9IGAke251bWJlcn1oYDtcblxuLy8gU3BlY2lmaWMgaW50ZXJmYWNlIGZvciBCbG9jayBEZXZpY2UgTWFwcGluZyBhbmQgRUJTIFZvbHVtZSBNYXBwaW5nXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrRGV2aWNlTWFwcGluZyB7XG4gICAgZGV2aWNlTmFtZT86IHN0cmluZztcbiAgICB2aXJ0dWFsTmFtZT86IHN0cmluZztcbiAgICBlYnM/OiBFYnNWb2x1bWVNYXBwaW5nO1xuICAgIG5vRGV2aWNlPzogc3RyaW5nO1xufVxuICBcbmV4cG9ydCBpbnRlcmZhY2UgRWJzVm9sdW1lTWFwcGluZyB7XG4gICAgZGVsZXRlT25UZXJtaW5hdGlvbj86IGJvb2xlYW47XG4gICAgaW9wcz86IG51bWJlcjtcbiAgICBzbmFwc2hvdElkPzogc3RyaW5nO1xuICAgIHZvbHVtZVNpemU/OiBzdHJpbmc7XG4gICAgdm9sdW1lVHlwZT86IEVic0RldmljZVZvbHVtZVR5cGU7XG4gICAga21zS2V5SWQ/OiBzdHJpbmc7XG4gICAgdGhyb3VnaHB1dD86IG51bWJlcjtcbiAgICBvdXRwb3N0QXJuPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIHRoYXQgaW5jbHVkZXMgYSByZWZlcmVuY2UgdG8gYSBHaXQgcmVwb3NpdG9yeSBmb3IgcmV1c2UsIHdpdGhvdXQgY3JlZGVudGlhbHNcbiAqIGFuZCBvdGhlciBhY2Nlc3MgaW5mb3JtYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2l0UmVwb3NpdG9yeVJlZmVyZW5jZSB7XG4gICAgLyoqXG4gICAgICogRXhwZWN0ZWQgdG8gc3VwcG9ydCBoZWxtIHN0eWxlIHJlcG8gYXQgdGhlIG1vbWVudFxuICAgICAqL1xuICAgIHJlcG9Vcmw6IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIFBhdGggd2l0aGluIHRoZSByZXBvc2l0b3J5XG4gICAgICovXG4gICAgcGF0aD86IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsIG5hbWUgZm9yIHRoZSBib290c3RyYXAgYXBwbGljYXRpb25cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nLFxuXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgdGFyZ2V0IHJldmlzaW9uIGZvciB0aGUgcmVwb3NpdG9yeS5cbiAgICAgKiBUYXJnZXRSZXZpc2lvbiBkZWZpbmVzIHRoZSByZXZpc2lvbiBvZiB0aGUgc291cmNlXG4gICAgICogdG8gc3luYyB0aGUgYXBwbGljYXRpb24gdG8uIEluIGNhc2Ugb2YgR2l0LCB0aGlzIGNhbiBiZVxuICAgICAqIGNvbW1pdCwgdGFnLCBvciBicmFuY2guIElmIG9taXR0ZWQsIHdpbGwgZXF1YWwgdG8gSEVBRC5cbiAgICAgKiBJbiBjYXNlIG9mIEhlbG0sIHRoaXMgaXMgYSBzZW12ZXIgdGFnIGZvciB0aGUgQ2hhcnQncyB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHRhcmdldFJldmlzaW9uPzogc3RyaW5nXG59XG5cbi8qKlxuICogRGF0YSB0eXBlIGRlZmluaW5nIGFuIGFwcGxpY2F0aW9uIHJlcG9zaXRvcnkgKGdpdCkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXBwbGljYXRpb25SZXBvc2l0b3J5IGV4dGVuZHMgR2l0UmVwb3NpdG9yeVJlZmVyZW5jZSB7XG5cbiAgICAvKipcbiAgICAgKiBTZWNyZXQgZnJvbSBBV1MgU2VjcmV0cyBNYW5hZ2VyIHRvIGltcG9ydCBjcmVkZW50aWFscyB0byBhY2Nlc3MgdGhlIHNwZWNpZmllZCBnaXQgcmVwb3NpdG9yeS5cbiAgICAgKiBUaGUgc2VjcmV0IG11c3QgZXhpc3QgaW4gdGhlIHNhbWUgcmVnaW9uIGFuZCBhY2NvdW50IHdoZXJlIHRoZSBzdGFjayB3aWxsIHJ1bi5cbiAgICAgKi9cbiAgICBjcmVkZW50aWFsc1NlY3JldE5hbWU/OiBzdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBEZXBlbmRpbmcgb24gY3JlZGVudGlhbHMgdHlwZSB0aGUgYXJuIHNob3VsZCBlaXRoZXIgcG9pbnQgdG8gYW4gU1NIIGtleSAocGxhaW4gdGV4dCB2YWx1ZSlcbiAgICAgKiBvciBhIGpzb24gZmlsZSB3aXRoIHVzZXJuYW1lL3Bhc3N3b3JkIGF0dHJpYnV0ZXMuXG4gICAgICogRm9yIFRPS0VOIHR5cGUgdXNlcm5hbWUgY2FuIGJlIGFueSBub24tZW1wdHkgdXNlcm5hbWUgYW5kIHRva2VuIHZhbHVlIGFzIHBhc3N3b3JkLlxuICAgICAqL1xuICAgIGNyZWRlbnRpYWxzVHlwZT86IFwiVVNFUk5BTUVcIiB8IFwiVE9LRU5cIiB8IFwiU1NIXCJcblxufVxuLyoqXG4gKiBBZGRzIENvbnN0cmFpbnRzIHRvIGFwcGxpY2F0aW9uIHJlcG9zaXRvcnlcbiAqL1xuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uUmVwb3NpdG9yeUNvbnN0cmFpbnRzIGltcGxlbWVudHMgY29uc3RyYWludHMuQ29uc3RyYWludHNUeXBlPEFwcGxpY2F0aW9uUmVwb3NpdG9yeT4ge1xuICAgIGNyZWRlbnRpYWxzU2VjcmV0TmFtZSA9IG5ldyBjb25zdHJhaW50cy5JbnRlcm5ldEhvc3RTdHJpbmdDb25zdHJhaW50KCk7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgQVBJIHRvIHJlZ2lzdGVyIHJlc291cmNlIHByb3ZpZGVycyBhbmQgZ2V0IGFjY2VzcyB0byB0aGUgcHJvdmlkZWQgcmVzb3VyY2VzLlxuICovXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VDb250ZXh0IHtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVzb3VyY2VzOiBNYXA8c3RyaW5nLCBJQ29uc3RydWN0PiA9IG5ldyBNYXAoKTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBzY29wZTogQ29uc3RydWN0LCBwdWJsaWMgcmVhZG9ubHkgYmx1ZXByaW50UHJvcHM6IEVrc0JsdWVwcmludFByb3BzKSB7IH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgcmVzb3VyY2UgcHJvdmlkZXIgYW5kIHNwZWNpZmllcyB0aGUgbmFtZSB1bmRlciB3aGljaCB0aGUgcHJvdmlkZWQgcmVzb3VyY2Ugd2lsbCBiZSByZWdpc3RlcmVkLFxuICAgICAqIEBwYXJhbSBuYW1lIFNwZWNpZmllcyB0aGUgbmFtZSBrZXkgdW5kZXIgd2hpY2ggdGhlIHByb3ZpZGVkIHJlc291cmNlcyB3aWxsIGJlIHJlZ2lzdGVyZWQgZm9yIHN1YnNlcXVlbnQgbG9vay11cHMuXG4gICAgICogQHBhcmFtIHByb3ZpZGVyIEltcGxlbWVudGF0aW9uIG9mIHRoZSByZXNvdXJjZSBwcm92aWRlciBpbnRlcmZhY2VcbiAgICAgKiBAcmV0dXJucyB0aGUgcHJvdmlkZWQgcmVzb3VyY2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkPFQgZXh0ZW5kcyBJQ29uc3RydWN0PihuYW1lOiBzdHJpbmcsIHByb3ZpZGVyOiBSZXNvdXJjZVByb3ZpZGVyPFQ+KTogVCB7XG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gcHJvdmlkZXIucHJvdmlkZSh0aGlzKTtcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnJlc291cmNlcy5oYXMobmFtZSksIGBPdmVyd3JpdGluZyAke25hbWV9IHJlc291cmNlIGR1cmluZyBleGVjdXRpb24gaXMgbm90IGFsbG93ZWQuYCk7XG4gICAgICAgIHRoaXMucmVzb3VyY2VzLnNldChuYW1lLCByZXNvdXJjZSk7XG4gICAgICAgIHJldHVybiByZXNvdXJjZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcm92aWRlZCByZXNvdXJjZSBieSB0aGUgc3VwcGxpZWQgbmFtZS5cbiAgICAgKiBAcGFyYW0gbmFtZSB1bmRlciB3aGljaCB0aGUgcmVzb3VyY2UgcHJvdmlkZXIgd2FzIHJlZ2lzdGVyZWRcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVzb3VyY2Ugb3IgdW5kZWZpbmVkIGlmIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2Ugd2FzIG5vdCBmb3VuZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQ8VCBleHRlbmRzIElDb25zdHJ1Y3QgPSBJQ29uc3RydWN0PihuYW1lOiBzdHJpbmcpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIDxUPnRoaXMucmVzb3VyY2VzLmdldChuYW1lKTtcbiAgICB9XG59XG5cbmV4cG9ydCBlbnVtIEdsb2JhbFJlc291cmNlcyB7XG4gICAgVnBjID0gJ3ZwYycsXG4gICAgSG9zdGVkWm9uZSA9ICdob3N0ZWQtem9uZScsXG4gICAgQ2VydGlmaWNhdGUgPSAnY2VydGlmaWNhdGUnLFxuICAgIEttc0tleSA9ICdrbXMta2V5JyxcbiAgICBBbXAgPSAnYW1wJyxcbn1cblxuXG4vKipcbiAqIENsdXN0ZXIgaW5mbyBzdXBwbGllcyByZXF1aXJlZCBpbmZvcm1hdGlvbiBvbiB0aGUgY2x1c3RlciBjb25maWd1cmF0aW9uLCByZWdpc3RlcmVkIHJlc291cmNlcyBhbmQgYWRkLW9uc1xuICogd2hpY2ggY291bGQgYmUgbGV2ZXJhZ2VkIGJ5IHRoZSBmcmFtZXdvcmssIGFkZC1vbiBpbXBsZW1lbnRhdGlvbnMgYW5kIHRlYW1zLlxuICovXG5leHBvcnQgY2xhc3MgQ2x1c3RlckluZm8ge1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBwcm92aXNpb25lZEFkZE9uczogTWFwPHN0cmluZywgQ29uc3RydWN0PjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNjaGVkdWxlZEFkZE9uczogTWFwPHN0cmluZywgUHJvbWlzZTxDb25zdHJ1Y3Q+PjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG9yZGVyZWRBZGRPbnM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgcmVzb3VyY2VDb250ZXh0OiBSZXNvdXJjZUNvbnRleHQ7XG4gICAgcHJpdmF0ZSBhZGRvbkNvbnRleHQ6IE1hcDxzdHJpbmcsIFZhbHVlcz47XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgQ2x1c3RlckluZm9cbiAgICAgKiBAcGFyYW0gcHJvcHNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBjbHVzdGVyOiBla3MuSUNsdXN0ZXIsICByZWFkb25seSB2ZXJzaW9uOiBla3MuS3ViZXJuZXRlc1ZlcnNpb24sXG4gICAgICAgIHJlYWRvbmx5IG5vZGVHcm91cHM/OiBla3MuTm9kZWdyb3VwW10sIHJlYWRvbmx5IGF1dG9zY2FsaW5nR3JvdXBzPzogQXV0b1NjYWxpbmdHcm91cFtdLCByZWFkb25seSBhdXRvTW9kZT86IGJvb2xlYW4sIHJlYWRvbmx5IGZhcmdhdGVQcm9maWxlcz86IGVrcy5GYXJnYXRlUHJvZmlsZVtdLCByZWFkb25seSBjbHVzdGVydjI/OiBla3N2Mi5JQ2x1c3RlciwgcmVhZG9ubHkgbm9kZWdyb3Vwc3YyPzogZWtzdjIuTm9kZWdyb3VwW10pIHtcbiAgICAgICAgdGhpcy5jbHVzdGVyID0gY2x1c3RlcjtcbiAgICAgICAgdGhpcy5wcm92aXNpb25lZEFkZE9ucyA9IG5ldyBNYXA8c3RyaW5nLCBDb25zdHJ1Y3Q+KCk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVkQWRkT25zID0gbmV3IE1hcDxzdHJpbmcsIFByb21pc2U8Q29uc3RydWN0Pj4oKTtcbiAgICAgICAgdGhpcy5vcmRlcmVkQWRkT25zID0gW107XG4gICAgICAgIHRoaXMuYWRkb25Db250ZXh0ID0gbmV3IE1hcDxzdHJpbmcsIFZhbHVlcz4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyB0aGUgcmVzb3VyY2UgY29udGV4dCBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2Ugb2YgdGhlIEVLUyBCbHVlcHJpbnQuXG4gICAgICogQHJldHVybnMgcmVzb3VyY2UgY29udGV4dCBvYmplY3RcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VDb250ZXh0KCk6IFJlc291cmNlQ29udGV4dCB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc291cmNlQ29udGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmplY3Rpb24gbWV0aG9kIHRvIHByb3ZpZGUgcmVzb3VyY2UgY29udGV4dC5cbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VDb250ZXh0XG4gICAgICovXG4gICAgcHVibGljIHNldFJlc291cmNlQ29udGV4dChyZXNvdXJjZUNvbnRleHQ6IFJlc291cmNlQ29udGV4dCkge1xuICAgICAgICB0aGlzLnJlc291cmNlQ29udGV4dCA9IHJlc291cmNlQ29udGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvdmlzaW9uZWRBZGRPbnMgbWFwXG4gICAgICogQHBhcmFtIGFkZE9uXG4gICAgICogQHBhcmFtIGNvbnN0cnVjdFxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRQcm92aXNpb25lZEFkZE9uKGFkZE9uOiBzdHJpbmcsIGNvbnN0cnVjdDogQ29uc3RydWN0KSB7XG4gICAgICAgIHRoaXMub3JkZXJlZEFkZE9ucy5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlzaW9uZWRPcmRlcmVkID0gdGhpcy5wcm92aXNpb25lZEFkZE9ucy5nZXQoZSk7XG4gICAgICAgICAgICBpZihwcm92aXNpb25lZE9yZGVyZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEFkZGluZyBkZXBlbmRlbmN5IGZyb20gJHthZGRPbn0gdG8gJHtlfWApO1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdC5ub2RlLmFkZERlcGVuZGVuY3kocHJvdmlzaW9uZWRPcmRlcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvdmlzaW9uZWRBZGRPbnMuc2V0KGFkZE9uLCBjb25zdHJ1Y3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIHRoZSBhZGRPbiBuYW1lLCByZXR1cm4gdGhlIHByb3Zpc2lvbmVkIGFkZE9uIGNvbnN0cnVjdFxuICAgICAqIEBwYXJhbSBhZGRPblxuICAgICAqIEByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25lZEFkZE9uKGFkZE9uOiBzdHJpbmcpOiBDb25zdHJ1Y3QgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aXNpb25lZEFkZE9ucy5nZXQoYWRkT24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIHByb3Zpc2lvbmVkIGFkZG9uc1xuICAgICAqIEByZXR1cm5zIHNjaGVkdWxlZEFkZE9uczogTWFwPHN0cmluZywgY2RrLkNvbnN0cnVjdD5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWxsUHJvdmlzaW9uZWRBZGRvbnMoKTogTWFwPHN0cmluZywgQ29uc3RydWN0PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3Zpc2lvbmVkQWRkT25zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJlUHJvdmlzaW9uZWRBZGRPbiBtYXAgd2l0aCB0aGUgcHJvbWlzZSBmb3IgdGhlIGNvbnN0cnVjdFxuICAgICAqIG9mIHRoZSBhZGRvbiBiZWluZyBwcm92aXNpb25lZFxuICAgICAqIEBwYXJhbSBhZGRPblxuICAgICAqIEBwYXJhbSBwcm9taXNlXG4gICAgICogQHBhcmFtIG9yZGVyZWQgaWYgYWRkb24gZGVwZW5kcyBvbiBwcmV2aW91cyBhZGRvbnMgZm9yIGNvbXBsZXRpb24gKHJ1bnMgc2VyaWFsbHkpXG4gICAgICovXG4gICAgcHVibGljIGFkZFNjaGVkdWxlZEFkZE9uKGFkZE9uOiBzdHJpbmcsIHByb21pc2U6IFByb21pc2U8Q29uc3RydWN0Piwgb3JkZXJlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLnNjaGVkdWxlZEFkZE9ucy5zZXQoYWRkT24sIHByb21pc2UpO1xuICAgICAgICBpZiAob3JkZXJlZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcmVkQWRkT25zLnB1c2goYWRkT24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHN0cmljdCBvcmRlcmluZyBpcyBhcHBsaWVkIHRvIHRoZSBhZGRvblxuICAgICAqIEBwYXJhbSBhZGRPbiBhZGRPbiBrZXlcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBwdWJsaWMgaXNPcmRlcmVkQWRkT24oYWRkT246IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmRlcmVkQWRkT25zLmluY2x1ZGVzKGFkZE9uKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb21pc2UgZm9yIHRoZSBBZGRvbiBjb25zdHJ1Y3RcbiAgICAgKiBAcGFyYW0gYWRkT25cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlPGNkay5Db25zdHJ1Y3Q+XG4gICAgICovXG4gICAgcHVibGljIGdldFNjaGVkdWxlZEFkZE9uKGFkZE9uOiBzdHJpbmcpOiBQcm9taXNlPENvbnN0cnVjdD4gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZWRBZGRPbnMuZ2V0KGFkZE9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBzY2hlZHVsZWQgYWRkb25zXG4gICAgICogQHJldHVybnMgc2NoZWR1bGVkQWRkT25zOiBNYXA8c3RyaW5nLCBQcm9taXNlPGNkay5Db25zdHJ1Y3Q+PlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBbGxTY2hlZHVsZWRBZGRvbnMoKTogTWFwPHN0cmluZywgUHJvbWlzZTxDb25zdHJ1Y3Q+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlZEFkZE9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyB0aGUgcmVzb3VyY2UgcmVnaXN0ZXJlZCB1bmRlciBzdXBwbGllZCBuYW1lXG4gICAgICogQHBhcmFtIG5hbWUgb2YgdGhlIHJlc291cmNlIHRvIGJlIHJldHVybmVkXG4gICAgICogQHJldHVybnMgUmVzb3VyY2Ugb2JqZWN0IG9yIHVuZGVmaW5lZCBpZiBubyByZXNvdXJjZSB3YXMgZm91bmRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2U8VCBleHRlbmRzIGNkay5JUmVzb3VyY2U+KG5hbWU6IHN0cmluZyk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvdXJjZUNvbnRleHQuZ2V0PFQ+KG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMge0BsaW5rIGdldFJlc291cmNlfSBidXQgd2lsbCBmYWlsIGlmIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaXMgbm90IGZvdW5kXG4gICAgICogQHBhcmFtIG5hbWUgb2YgdGhlIHJlc291cmNlIHRvIGJlIHJldHVybmVkXG4gICAgICogQHJldHVybnMgUmVzb3VyY2Ugb2JqZWN0IChmYWlscyBpZiBub3QgZm91bmQpXG4gICAgICovXG4gICAgcHVibGljIGdldFJlcXVpcmVkUmVzb3VyY2U8VCBleHRlbmRzIGNkay5JUmVzb3VyY2U+KG5hbWU6IHN0cmluZyk6IFQge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc291cmNlQ29udGV4dC5nZXQ8VD4obmFtZSk7XG4gICAgICAgIGFzc2VydChyZXN1bHQsICdSZXF1aXJlZCByZXNvdXJjZSAnICsgbmFtZSArICcgaXMgbWlzc2luZy4nKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFkZG9uQ29udGV4dCBtYXBcbiAgICAgKiBAcGFyYW0gYWRkT25cbiAgICAgKiBAcGFyYW0gVmFsdWVzXG4gICAgICovXG4gICAgcHVibGljIGFkZEFkZE9uQ29udGV4dChhZGRPbjogc3RyaW5nLCB2YWx1ZXM6IFZhbHVlcykge1xuICAgICAgICB0aGlzLmFkZG9uQ29udGV4dC5zZXQoYWRkT24sIHZhbHVlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIGFsbCBhZGRvbiBjb250ZXh0c1xuICAgICogQHJldHVybnMgYWRkb25Db250ZXh0OiBNYXA8c3RyaW5nLCBWYWx1ZXM+XG4gICAgKi9cbiAgICBwdWJsaWMgZ2V0QWRkT25Db250ZXh0cygpOiBNYXA8c3RyaW5nLCBWYWx1ZXM+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkb25Db250ZXh0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbnVtIHR5cGUgZm9yIHR3byBkaWZmZXJlbnQgR2l0T3BzIG9wZXJhdGluZyBtb2Rlc1xuICovXG5leHBvcnQgZW51bSBHaXRPcHNNb2RlIHtcbiAgICAvKipcbiAgICAgKiBDREsgZGVwbG95cyB0aGUgYEFwcGxpY2F0aW9uYCByZXNvdXJjZSBmb3IgZWFjaCBBZGRPbiBlbmFibGVkIG9yIGN1c3RvbWVyIHdvcmtsb2FkcyxcbiAgICAgKiBhbmQgQXJnb0NEIGRlcGxveXMgdGhlIGFjdHVhbCBBZGRPbiBhbmQgd29ya2xvYWRzIHZpYSBHaXRPcHMgYmFzZWQgb24gdGhlIGBBcHBsaWNhdGlvbmAgcmVzb3VyY2UuXG4gICAgICovXG4gICAgQVBQTElDQVRJT04sXG4gICAgLyoqXG4gICAgICogQ0RLIGRlcGxveXMgb25seSBvbmUgYEFwcGxpY2F0aW9uYCByZXNvdXJjZSBmb3IgdGhlIEFwcCBvZiBBcHBzLCBha2EgYGJvb3RzdHJhcC1hcHBzYCxcbiAgICAgKiBhbmQgQXJnb0NEIGRlcGxveXMgYWxsIHRoZSBBZGRPbnMgYmFzZWQgb24gdGhlIGNoaWxkIGBBcHBsaWNhdGlvbmAgZGVmaW5lZCBpbiBgYm9vdHN0cmFwLWFwcHNgLlxuICAgICAqL1xuICAgIEFQUF9PRl9BUFBTXG59XG4iXX0=